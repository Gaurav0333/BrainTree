{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./cartridges/app_storefront_base/cartridge/client/default/js/components/scrollAnimate.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/applepay/applepayHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeApplepay.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeCreditCard.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeGooglepay.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeLocal.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeMFRA.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreePaypal.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeSrc.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeUtils.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/braintreeVenmo.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/creditcard/creditcardAccount.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/creditcard/creditcardFields.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/creditcard/creditcardHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/creditcard/creditcardPayment.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/googlepay/googlepayAccount.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/googlepay/googlepayHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/googlepay/googlepayPayment.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/helper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/loaderHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/local/localPayment.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/minicartHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalAccount.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalPayment.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/paypal/paypalSavedAccountHandler.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/src/srcHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/src/srcPayment.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/venmo/venmoAccount.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/venmo/venmoHelper.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/braintree/venmo/venmoPayment.js","webpack:///./cartridges/int_braintree/cartridge/client/default/js/int_braintree.js"],"names":["module","exports","element","position","length","offset","top","$","animate","scrollTop","focus","braintreeUtils","require","applePay","isValidInputField","$applePayButton","document","querySelector","$applepayButtonsWrap","$applepayDataMethod","$emailField","$phoneField","makeApplePayButtonDisabled","classList","add","hideApplePayButton","style","display","showApplePayButton","initApplepayButton","querySelectorAll","forEach","el","$btn","JSON","parse","getAttribute","config","console","error","addEventListener","isRequiredBillingContactFields","isRequiredShippingContactFields","applePayIns","init","startPayment","updateCartApplepayAmount","loader","show","ajax","url","getOrderInfoUrl","type","dataType","success","data","hide","updateAmount","amount","window","location","reload","on","e","postData","braintreeApplePayBillingAddress","stringify","detail","billingAddress","braintreeApplePayShippingAddress","shippingAddress","braintreeApplePayNonce","nonce","returnUrl","setAttribute","applepayPayment","continueButton","applepayButton","authorizedApplePayPayment","value","click","appleUpdateAmountData","loaderInstance","bu","Constructor","initParams","$errorContainer","createElement","className","$loaderContainter","parentNode","insertBefore","nextSibling","params","er","createErrorInstance","prototype","createApplePay","that","braintree","client","create","authorization","clientToken","clientErr","clientInstance","applePayInstance","createApplePaySession","paymentRequest","createPaymentRequest","total","label","options","displayName","requiredBillingContactFields","requiredShippingContactFields","session","ApplePaySession","onvalidatemerchant","event","performValidation","validationURL","eventError","merchantSession","abort","completeMerchantValidation","onpaymentauthorized","tokenize","token","payment","payload","completePayment","STATUS_FAILURE","STATUS_SUCCESS","shippingContact","streetAddress","addressLines","extendedAddress","locality","region","administrativeArea","toUpperCase","postalCode","countryCodeAlpha2","countryCode","firstName","givenName","lastName","familyName","phone","phoneNumber","email","emailAddress","billingContact","dispatchEvent","CustomEvent","begin","promise","canMakePaymentsWithActiveCard","merchantIdentifier","then","ins","extend","messages","creditcardHelper","createHostedFields","isFraudToolsEnabled","dataCollector","kount","paypal","deviceData","hostedFields","styles","hostedFieldsStyles","fields","hostedFieldsConfig","hostedFieldsInstance","isFormValid","$cardOwnerEl","validation","remove","check3dSecureAndSubmit","response","startTokenizeCb","errorCode","is3dSecureEnabled","billingData","getBillingAddressFormValues","threeDSecure","version","btError","verifyCard","bin","details","surname","address1","address2","city","stateCode","country","additionalInformation","shippingAdditionalInfo","onLookupComplete","next","err","liabilityShifted","isSkip3dSecureLiabilityResult","result","secure3DFailed","startTokenize","cb","convertCardTypeToDwFormat","cardType","lastFour","initFields","$container","creditcardErrorContainer","cardOwnerEvents","getHostedFieldsStyles","input","color","getHostedFieldsConfig","number","selector","cvv","expirationDate","hostedFieldsAdvancedOptions","getHostedFieldInstance","updateData","createGooglepay","paymentsClient","google","payments","api","PaymentsClient","environment","googlePayment","googlePayVersion","googlePaymentErr","googlePaymentInstance","allowedPaymentMethods","createPaymentDataRequest","isReadyToPay","apiVersion","apiVersionMinor","onGooglePaymentButtonClicked","paymentDataRequest","transactionInfo","currencyCode","currency","totalPriceStatus","totalPrice","String","shippingAddressRequired","isShippingAddressRequired","shippingAddressParameters","allowedCountryCodes","phoneNumberRequired","emailRequired","cardPaymentMethod","parameters","billingAddressRequired","billingAddressParameters","format","loadPaymentData","paymentData","parseResponse","onTokenizePayment","catch","log","button","createButton","onClick","appendChild","scrollAnimate","errorText","createLocalPayment","localPayment","localPaymentInstance","createLocalPaymentClickListener","emailField","preventDefault","getJSON","reqData","Object","assign","createRequestData","onPaymentStart","_","start","processingMsg","finalProcessingMsg","paymentConfirmUrl","contentType","lpmName","redirectUrl","href","responseText","text","paymentMethod","dataset","localPaymentMethodName","shippingData","recipientName","split","paymentType","fallback","fallbackUrl","buttonText","address","updateShippingData","localIns","updateShippingAddress","helper","applepayHelper","creditcardPayment","creditCardFields","creditCardAccount","minicartHelper","paypalAccount","paypalPayment","paypalHelper","paypalSavedAccountHandler","local","orderStage","getElementById","pageState","sessionStorage","getItem","$form","$cartPage","$continueButton","$summaryDetails","$addCreditCardForm","$paypalContent","$creditCardContent","$applepayContent","$braintreePaypalNonce","$minicartPopover","$creditCardList","$staticPaypalButton","venmoAccount","venmoPayment","$venmoContent","googlePayAccount","googlepayPayment","googlepayHelper","$googlepayContent","$googlepayOnCart","$addGooglePayAccountForm","$braintreeGooglePayNonce","braintreeSrc","$srcContent","NodeList","Array","bubbles","cancelable","undefined","evt","createEvent","initCustomEvent","Event","initWathcherCartUpdate","initAccountAddCreditCard","initAddGooglePayAccount","miniCartButton","observer","observe","childList","paymentMethodChangeHandle","makePaypalPayment","initCreditCardFields","initCardListAndSaveFunctionality","doNotAllowSubmitForm","continueButtonToggle","setTimeout","hide3DSecureContainer","isTrusted","isNonceExist","updatePayPalAppearance","removeSessionAccount","makeCreditCardPayment","makeVenmoPayment","makeGooglepayPayment","initSrcButton","target","cardList","paypalList","changeEvent","hash","initEvent","updateCheckoutView","updatePaymentMethodTab","removeItem","paypalStaticPdpButtonHandler","staticImageHandler","initPayPalEvents","initVenmoEvents","initCardEvents","onclick","removeBtPayment","pid","uuid","removeFromCartUrl","$price","sdkUrlConfiguration","isZeroAmount","$braintreePDPButton","$miniCartQuantity","$addToCartButton","$paypalCartButton","$paypalBillingButton","$braintreePaypalRiskDataInput","$loaderContainer","riskData","parseInt","textContent","hidePDPButton","paypalCheckout","paypalCheckoutInstance","disabled","showPDPButton","res","pdpOnlickForAsignedPaypalPayment","cart","pliUUID","actionUrls","removeProductLineItemUrl","parseFloat","totals","grandTotal","replace","Error","message","createPayment","paypalButtonConfig","locale","onApprove","intent","tokenizePayment","onCancel","a","b","urlParams","appendToUrl","spinner","stop","onError","productID","zeroAmountErrorMsg","actions","showCartErrorMsg","showCheckoutErrorMsg","reject","flow","createOrder","components","commit","createBillingAgreement","vault","paypalConfig","isPayPalSDKLoaded","loadPayPalSDK","Buttons","render","shippingAddressOverride","loadSrcButton","visaCheckout","srcPaymentErr","visaCheckoutInstance","baseInitOptions","subtotal","initOptions","createInitOptions","settings","shipping","collectShipping","V","tokenizeErr","billingAddressString","userData","userEmailbillingAddress","isDebugMode","consoleLog","consoleError","apply","arguments","$bundleItem","getOptions","$productContainer","find","map","$elOption","urlValue","val","selectedValueId","optionId","toArray","closest","form","quantity","items","childProducts","method","async","responseJSON","getSelectedData","selectEl","getElementsByTagName","option","i","selected","attributes","formData","FormData","key","append","processData","errorInstances","containerElement","callback","push","containerEl","msg","code","innerHTML","$braintreeVenmoRiskDataInput","createVenmo","isBrowserSupported","dataCollectorErr","dataCollectorInstance","venmo","allowNewBrowserTab","ignoreHistoryChanges","venmoErr","venmoInstance","deviceNotSupportVenmo","venmoAccountPage","processResultsDelay","handleVenmoError","handleVenmoSuccess","localStorage","setItem","creditCard","submitCreditCardForm","submit","addCreditCardForm","attr","serialize","getShippingAdditionalInfo","orderAddress","workPhoneNumber","shippingGivenName","slice","join","shippingSurname","shippingPhone","line1","line2","state","$creditCardMakeDefault","$saveCreditCard","$cardOwner","errorIns","errorData","invalidFieldKeys","braintreeType","cardOwnerUpdateClasses","cardListChange","$cardOwnerPh","$cardNumbeber","$cardNumbeberPh","$cardCvv","$cardCvvPh","$cardExpiration","$cardExpirationPh","$braintreeSaveCardContainer","$creditCardFieldsContainer","$braintree3DSecureContainer","$saveCardAndDefaultContainer","changeCardOwnerInput","checked","selectedCard","makeCardDefault","allowSubmitForm","isActiveCreditCardTab","contains","getNonceUrl","cardUUID","get","responce","stopPropagation","googlepay","submitAddGooglePayAccountForm","$btFormErrorContainer","post","done","fail","$googlepayNonce","$btGooglePayLoader","googlepayIns","saving_paypal_account_error","$btGooglepayAccountsList","$googlepayButton","showGooglepayAccount","$sessionAccount","$gpAccount","hideShowButtons","createGooglepayBillingAddressData","paymentMethodData","info","name","createGooglepayShippingAddressData","$googlepayCardDescription","$braintreeGooglepayBillingAddressInput","$braintreeGooglepayPaymentType","selectedOptions","billingAddressData","shippingAddressData","newPPAccount","returnFromCartUrl","paymentCardDescription","saveGpAccount","removeAttribute","googlepayUpdateAmount","$grantTotal","currentGrantTotalValue","newGrantTotalValue","updateCartTotals","flag","stage","substring","currentTab","$tabContent","tab","getPaymentMethodToLowerCase","paymentMethodName","index","charAt","toLocaleLowerCase","$paymentSummary","htmlToAppend","order","billing","selectedPaymentInstruments","creditCardNumber","gpCardDescription","gpCardDescriptionData","priceTotal","field","checkValidity","braintreePaymentMethod","content","toLowerCase","children","reduce","accumulator","item","elem","lastIndexOf","$nonce","nonceValue","$tab","isActiveTab","accountsLoader","UUID","newDefaultPaypalAccount","newDefaultCreditCard","fontWeight","createPaymentFormData","paymentFields","fieldsData","paymentFieldsParsed","entries","entry","id","cardToRemoveDefaultProperty","braintreeLocal","$lpmButton","payPal","$paypalMinicartButton","btnInstance","braintreePaypalNonce","braintreePaypalRiskData","createBillingAddressData","braintreePaypalBillingAddress","createShippingAddressData","braintreePaypalShippingAddress","requestBillingAgreement","braintreeSavePaypalAccount","braintreePaypalAccountMakeDefault","paypalHandle","paypalIns","updateCartPaypalAmount","$totalPrice","MutationObserver","mutations","mutation","addedNodes","initAddPaypalAccount","$paypalErrorContainer","$paypalLoader","accountPaypalButton","paypalAddAccountHandler","paypalAccountFormFields","paypalAccountFormData","makedefault","csrfToken","hidePaypalAccountBtn","renderAccountsUrl","tplData","showPaypalAccountBtn","$addPaypalAccountBtn","$paypalAccountWrapper","formValidationConrol","validateActions","enable","disable","getSessionAccountOption","getOptionByEmail","sessionEmail","getOptionByDataDefault","setSessionAccountOptionDefault","savedDefaultOption","initAccountListAndSaveFunctionality","$accountsList","isUserHasSavedAccount","$savePaypalAccountCountainer","$savePaypalAccountCheckbox","$paypalAccounMakeDefaultContainer","$paypalAccountMakeDefaultCheckbox","$alertInfo","accountsListChange","isSameSessionAccount","selectedAccount","inpShippingAddress","inpBillingAddress","param","newUrl","indexOf","keys","encodeURIComponent","showPayPalAccount","braintreePaypalEmail","braintreePaypalAccount","$braintreePaypalAccountsList","customerAuthenticated","addClass","scrollTo","sessionOption","defaultOption","call","googlePayHelper","$paypalButton","$braintreePaypalBillingAddressInput","$braintreePaypalShippingAddressInput","$braintreePaypalNonceInput","$braintreePaypalEmail","isSessionAccount","sessionAccount","validate","updateAmountAndShippingData","$paypalAddress","newPayPalAddress","checkoutFromCartUrl","$srcSessionAccount","$srcAccountList","$srcButton","$accoutnListBlock","srcUpdateAmount","srcIns","setSessionAccountData","cardDescrition","updateSessionAccountDropdown","initSessionAccountDropdownState","src","srcHelper","$srcNonce","$srcCardDescription","$srcBillingAddress","description","bind","braintreeVenmo","venmoHelper","initAddVenmoAccount","$venmoErrorContainer","$venmoLoader","showVenmoAccountError","VENMO_BROWSER_NOT_SUPPORTED","accountVenmoButton","venmoAddAccountHandler","venmoAccountFormFields","venmoAccountFormData","hideVenmoAccountBtn","$addVenmoAccountBtn","showVenmoAccountBtn","$saveVenmoAccountCountainerEl","$saveVenmoAccountEl","$venmoAccounMakeDefaultEl","$venmoButton","$braintreeVenmoAccount","$venmoAccount","$braintreeVenmoUserId","$venmoAccountWrapper","showVenmoAccount","createLoaderContainter","$target","hideVenmoButton","parentElement","firstElementChild","updateBillingAddressFormValues","inputNames","each","decodeURIComponent","$btVermoAccountsList","$braintreeVenmoNonce","$submitShippingBtn","$contactEmail","$hideVenmoButton","$billingForm","username","history","hashChange","correlationId","attributeName","checkoutStage","oldValue","attributeOldValue"],"mappings":"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","file":"int_braintree.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./cartridges/int_braintree/cartridge/client/default/js/int_braintree.js\");\n","'use strict';\n\nmodule.exports = function (element) {\n    var position = element && element.length ? element.offset().top : 0;\n    $('html, body').animate({\n        scrollTop: position\n    }, 500);\n    if (!element) {\n        $('.logo-home').focus();\n    }\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar applePay = require('../braintreeApplepay');\nvar { isValidInputField } = require('./../helper');\n\n\nvar $applePayButton = document.querySelector('.js_braintree_applepay_button');\nvar $applepayButtonsWrap = document.querySelector('.js_braintree_applepayButtonsWrap');\nvar $applepayDataMethod = document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"ApplePay\"]');\nvar $emailField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $phoneField = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]');\n\nfunction makeApplePayButtonDisabled() {\n    $applePayButton.classList.add('js_braintree_applepay_button_disabled');\n}\n\nfunction hideApplePayButton() {\n    $applepayButtonsWrap.style.display = 'none'; // Remove the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'none';\n    }\n}\n\nfunction showApplePayButton() {\n    $applepayButtonsWrap.style.display = 'block'; // Show the ApplePay select payment method radiobutton\n    if ($applepayDataMethod) {\n        $applepayDataMethod.style.display = 'block';\n    }\n}\n\nfunction initApplepayButton() {\n    document.querySelectorAll('.js_braintree_applepay_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n\n        $btn.addEventListener('braintree:deviceNotSupportApplePay', function () {\n            hideApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:deviceSupportApplePay', function () {\n            showApplePayButton();\n        }, false);\n        $btn.addEventListener('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n            makeApplePayButtonDisabled();\n        }, false);\n\n        config.isRequiredBillingContactFields = true;\n        config.isRequiredShippingContactFields = true;\n        var applePayIns = applePay.init(config, $btn);\n\n        $btn.addEventListener('click', function () {\n            applePayIns.startPayment();\n        });\n\n        function updateCartApplepayAmount() {\n            if (!applePayIns) {\n                return;\n            }\n            applePayIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    applePayIns.loader.hide();\n                    applePayIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n            return;\n        }\n        $('body').on('braintree:updateCartTotals', updateCartApplepayAmount);\n\n        $btn.addEventListener('braintree:ApplePayPaymentAuthorized', function (e) {\n            var postData = {\n                braintreeApplePayBillingAddress: JSON.stringify(e.detail.data.billingAddress),\n                braintreeApplePayShippingAddress: JSON.stringify(e.detail.data.shippingAddress),\n                braintreeApplePayNonce: e.detail.data.nonce\n            };\n            applePayIns.loader.show();\n            braintreeUtils.postData(config.returnUrl, postData);\n        }, false);\n\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nfunction applepayPayment(continueButton) {\n    var config = JSON.parse($applePayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($applePayButton, 'not valid data-braintree-config');\n    }\n    var applepayButton = $('.js_braintree_applepay_button');\n    applepayButton.on('braintree:deviceNotSupportApplePay', function () {\n        hideApplePayButton();\n    });\n    applepayButton.on('braintree:deviceSupportApplePay', function () {\n        showApplePayButton();\n    });\n    applepayButton.on('braintree:ApplePayCanNotMakePaymentWithActiveCard', function () {\n        makeApplePayButtonDisabled();\n    });\n\n    config.isRequiredBillingContactFields = true;\n    var applePayIns = applePay.init(config, $applePayButton);\n\n    function authorizedApplePayPayment(e) {\n        applePayIns.loader.show();\n        document.querySelector(('#braintreeApplePayNonce')).value = e.detail.data.nonce;\n        document.querySelector(('#braintreeApplePayBillingAddress')).value = JSON.stringify(e.detail.data.billingAddress);\n        continueButton.click();\n    }\n\n    if (!applePayIns) return;\n    $applePayButton.addEventListener('click', function () {\n        if (isValidInputField($emailField) && isValidInputField($phoneField)) {\n            return applePayIns.startPayment();\n        }\n    });\n\n    applepayButton.on('braintree:ApplePayPaymentAuthorized', authorizedApplePayPayment);\n\n    function appleUpdateAmountData() { // eslint-disable-line no-inner-declarations\n        applePayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                applePayIns.loader.hide();\n                applePayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n    $('body').on('checkout:updateCheckoutView', appleUpdateAmountData);\n    appleUpdateAmountData();\n}\n\nmodule.exports = {\n    initApplepayButton,\n    applepayPayment\n};\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n/* global braintreeUtils braintree $ ApplePaySession */\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeApplePayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createApplePay = function () {\n    var that = this;\n    var params = that.params;\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        braintree.applePay.create({\n            client: clientInstance\n        }, function (error, applePayInstance) {\n            loader.hide();\n            if (error) {\n                that.er.show(error);\n                return;\n            }\n            that.createApplePaySession = function () {\n                var paymentRequest = applePayInstance.createPaymentRequest({\n                    total: {\n                        label: params.options.displayName,\n                        amount: params.options.amount\n                    }\n                });\n                if (params.isRequiredBillingContactFields) {\n                    paymentRequest.requiredBillingContactFields = ['postalAddress', 'name'];\n                }\n                if (params.isRequiredShippingContactFields) {\n                    paymentRequest.requiredShippingContactFields = ['postalAddress', 'name', 'phone', 'email'];\n                }\n\n                var session = new ApplePaySession(1, paymentRequest);\n\n                session.onvalidatemerchant = function (event) {\n                    loader.show();\n                    applePayInstance.performValidation({\n                        validationURL: event.validationURL,\n                        displayName: params.options.displayName\n                    }, function (eventError, merchantSession) {\n                        loader.hide();\n                        if (eventError) {\n                            that.er.show(eventError);\n                            session.abort();\n                            return;\n                        }\n                        session.completeMerchantValidation(merchantSession);\n                    });\n                };\n                session.onpaymentauthorized = function (event) {\n                    loader.show();\n                    applePayInstance.tokenize({\n                        token: event.payment.token\n                    }, function (eventError, payload) {\n                        loader.hide();\n                        if (eventError) {\n                            that.er.show(eventError);\n                            session.completePayment(ApplePaySession.STATUS_FAILURE);\n                            return;\n                        }\n\n                        session.completePayment(ApplePaySession.STATUS_SUCCESS);\n\n                        var data = {\n                            event: event,\n                            payload: payload,\n                            nonce: payload.nonce\n                        };\n                        var shippingContact = event.payment.shippingContact;\n                        if (shippingContact) {\n                            data.shippingAddress = {\n                                streetAddress: shippingContact.addressLines[0],\n                                extendedAddress: shippingContact.addressLines[1],\n                                locality: shippingContact.locality,\n                                region: shippingContact.administrativeArea.toUpperCase(),\n                                postalCode: shippingContact.postalCode,\n                                countryCodeAlpha2: shippingContact.countryCode.toUpperCase(),\n                                firstName: shippingContact.givenName,\n                                lastName: shippingContact.familyName,\n                                phone: shippingContact.phoneNumber,\n                                email: shippingContact.emailAddress\n                            };\n                        } else {\n                            shippingContact = {\n                                emailAddress: document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]').value,\n                                phoneNumber: document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_phone]').value\n                            };\n                        }\n\n                        var billingContact = event.payment.billingContact;\n                        if (billingContact) {\n                            data.billingAddress = {\n                                streetAddress: billingContact.addressLines[0],\n                                extendedAddress: billingContact.addressLines[1],\n                                locality: billingContact.locality,\n                                region: billingContact.administrativeArea.toUpperCase(),\n                                postalCode: billingContact.postalCode,\n                                countryCodeAlpha2: billingContact.countryCode.toUpperCase(),\n                                firstName: billingContact.givenName,\n                                lastName: billingContact.familyName,\n                                email: shippingContact.emailAddress,\n                                phone: shippingContact.phoneNumber\n                            };\n                        }\n\n                        that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayPaymentAuthorized', {\n                            detail: {\n                                data: data\n                            }\n                        }));\n                    });\n                };\n                session.begin();\n            };\n            var promise = ApplePaySession.canMakePaymentsWithActiveCard(applePayInstance.merchantIdentifier);\n            promise.then(function (canMakePaymentsWithActiveCard) {\n                if (!canMakePaymentsWithActiveCard) {\n                    that.$btn.dispatchEvent(new CustomEvent('braintree:ApplePayCanNotMakePaymentWithActiveCard'));\n                    that.createApplePaySession = null;\n                    return;\n                }\n            });\n        });\n    });\n};\n\nConstructor.prototype.startPayment = function () {\n    this.er.hide();\n    if (this.createApplePaySession) {\n        this.createApplePaySession();\n    }\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        if (!window.ApplePaySession) {\n            $btn.dispatchEvent(new CustomEvent('braintree:deviceNotSupportApplePay'));\n            return false;\n        }\n        $btn.dispatchEvent(new CustomEvent('braintree:deviceSupportApplePay'));\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        ins.createApplePay();\n        return ins;\n    }\n};\n\n","/* eslint-disable block-scoped-var */\n'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar creditcardHelper = require('./creditcard/creditcardHelper');\n\n/* global braintreeUtils braintree $ */\n\nvar bu = braintreeUtils;\nvar er = null;\nvar loader;\nvar params;\n\nfunction createHostedFields() {\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            kount: true,\n            paypal: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                return;\n            }\n            document.querySelector('#braintreeDeviceData').value = data.deviceData;\n        });\n    }\n    loader.show();\n\n    braintree.hostedFields.create({\n        authorization: bu.clientToken,\n        styles: params.hostedFieldsStyles,\n        fields: params.hostedFieldsConfig\n    }, function (error, hostedFieldsInstance) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            return;\n        }\n        params.hostedFieldsInstance = hostedFieldsInstance;\n        hostedFieldsInstance.on('validityChange', function () {\n            if (params.continueButton && JSON.parse(params.continueButton.getAttribute('data-is-allow-submit-form'))) {\n                params.continueButton.setAttribute('data-is-allow-submit-form', false);\n            }\n        });\n    });\n}\n\nfunction isFormValid() {\n    var $cardOwnerEl = document.querySelector('#braintreeCardOwner');\n    if ($cardOwnerEl.value.length === 0) {\n        $cardOwnerEl.parentNode.classList.add('braintree-hosted-fields-invalid');\n        er.show(params.messages.validation);\n        return false;\n    }\n    $cardOwnerEl.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    er.hide();\n\n    return true;\n}\n\nfunction check3dSecureAndSubmit(response, startTokenizeCb) {\n    if (!response.nonce || response.nonce === 'null') {\n        document.querySelector('#braintreePaymentMethodNonce').value = 'null';\n        startTokenizeCb({\n            error: true,\n            errorCode: 'nonce_is_null'\n        });\n        return;\n    }\n    if (!params.is3dSecureEnabled) {\n        document.querySelector('#braintreePaymentMethodNonce').value = response.nonce;\n        startTokenizeCb({\n            error: false,\n            errorCode: 'ok'\n        });\n        return;\n    }\n\n    loader.show();\n\n    var billingData = require('./helper').getBillingAddressFormValues();\n\n    braintree.threeDSecure.create({\n        authorization: bu.clientToken,\n        version: 2\n    }, function (error, threeDSecure) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            startTokenizeCb({\n                error: true,\n                errorCode: 'bt_3dsecure_create_error',\n                btError: error\n            });\n            return;\n        }\n        bu.threeDSecure = threeDSecure;\n        loader.show();\n        threeDSecure.verifyCard({\n            amount: params.data.amount,\n            nonce: response.nonce,\n            bin: response.details ? response.details.bin : '',\n            email: document.querySelector('#email').value,\n            billingAddress: {\n                givenName: billingData.firstName,\n                surname: billingData.lastName,\n                phoneNumber: billingData.phone,\n                streetAddress: billingData.address1,\n                extendedAddress: billingData.address2,\n                locality: billingData.city,\n                region: billingData.stateCode,\n                postalCode: billingData.postalCode,\n                countryCodeAlpha2: billingData.country\n            },\n            additionalInformation: params.data.shippingAdditionalInfo,\n            onLookupComplete: function (data, next) {\n                next();\n            }\n        }, function (err, data) {\n            loader.hide();\n            if (err) {\n                er.show(err);\n                startTokenizeCb({\n                    error: true,\n                    errorCode: 'bt_3dsecure_verify_error',\n                    btError: err\n                });\n                return;\n            }\n            if (data.liabilityShifted || params.isSkip3dSecureLiabilityResult) {\n                document.querySelector('#braintreeIs3dSecureRequired').value = 'true';\n                document.querySelector('#braintreePaymentMethodNonce').value = data.nonce;\n                startTokenizeCb({\n                    error: false,\n                    result: 'ok'\n                });\n                return;\n            }\n            er.show(params.messages.secure3DFailed);\n            startTokenizeCb({\n                error: true,\n                result: 'secure3DFailed'\n            });\n            return;\n        });\n    });\n}\n\nfunction startTokenize(cb, response) {\n    if (response && response.nonce) {\n        check3dSecureAndSubmit(response, cb);\n        return;\n    }\n    if (!isFormValid()) {\n        cb({\n            error: true,\n            errorCode: 'fields_not_valid'\n        });\n        return;\n    }\n    loader.show();\n    params.hostedFieldsInstance.tokenize(function (error, data) {\n        loader.hide();\n        if (error) {\n            er.show(error);\n            cb({\n                error: true,\n                errorCode: 'bt_tokenize_error',\n                btError: error\n            });\n            return;\n        }\n        if (data.type === 'CreditCard') {\n            document.querySelector('#braintreeCardType').value = creditcardHelper.convertCardTypeToDwFormat(data.details.cardType);\n            document.querySelector('#braintreeCardMaskNumber').value = '************' + data.details.lastFour;\n        }\n        check3dSecureAndSubmit(data, cb);\n    });\n}\n\nfunction init(initParams) {\n    params = initParams;\n    bu.clientToken = params.clientToken;\n}\n\nfunction initFields(initParams, $container) {\n    params = initParams;\n    params.$container = $container;\n\n    er = bu.createErrorInstance(document.querySelector('#braintreeCreditCardErrorContainer'), creditcardHelper.creditcardErrorContainer);\n    loader = loaderInstance(document.querySelector('#braintreeCreditCardLoader'));\n    bu.clientToken = params.clientToken;\n    $.extend(bu.messages, params.messages);\n\n    creditcardHelper.cardOwnerEvents();\n\n    function getHostedFieldsStyles() {\n        return {\n            input: {\n                'font-size': '12px',\n                color: '#b7802a'\n            },\n            ':focus': {\n                color: 'blue'\n            },\n            '.valid': {\n                color: 'green'\n            },\n            '.invalid': {\n                color: 'red'\n            }\n        };\n    }\n\n    function getHostedFieldsConfig() {\n        return {\n            number: {\n                selector: '#braintreeCardNumber'\n            },\n            cvv: {\n                selector: '#braintreeCvv'\n            },\n            expirationDate: {\n                selector: '#braintreeExpirationDate'\n            }\n        };\n    }\n\n    if (!params.hostedFieldsStyles) {\n        params.hostedFieldsStyles = getHostedFieldsStyles();\n    }\n\n    params.hostedFieldsConfig = getHostedFieldsConfig();\n\n    $.extend(params.hostedFieldsConfig, params.hostedFieldsAdvancedOptions);\n\n    createHostedFields();\n}\n\nmodule.exports = {\n    init,\n    initFields,\n    startTokenize,\n    isFormValid,\n    getHostedFieldInstance: function () {\n        return params ? params.hostedFieldsInstance : null;\n    },\n    updateData: function (data) {\n        params.data = data;\n    }\n};\n","'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n/* global braintreeUtils braintree $ Googlepay */\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeGooglepayLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createGooglepay = function () {\n    var that = this;\n    var params = that.params;\n\n    var paymentsClient = new google.payments.api.PaymentsClient({ // eslint-disable-line no-undef\n        environment: 'TEST' // Or 'PRODUCTION'\n    });\n\n    braintree.client.create({\n        authorization: params.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n        braintree.googlePayment.create({\n            client: clientInstance,\n            googlePayVersion: 2\n        }, function (googlePaymentErr, googlePaymentInstance) {\n            if (googlePaymentErr) {\n                that.er.show(googlePaymentErr);\n                return;\n            }\n            var allowedPaymentMethods = googlePaymentInstance.createPaymentDataRequest().allowedPaymentMethods;\n            paymentsClient.isReadyToPay({\n                // see https://developers.google.com/pay/api/web/reference/object#IsReadyToPayRequest\n                apiVersion: 2,\n                apiVersionMinor: 0,\n                allowedPaymentMethods: allowedPaymentMethods\n            }).then(function (response) {\n                if (response.result) {\n                    function onGooglePaymentButtonClicked() { // eslint-disable-line no-inner-declarations\n                        loader.show();\n                        var paymentDataRequest = googlePaymentInstance.createPaymentDataRequest({\n                            transactionInfo: {\n                                currencyCode: params.options.currency,\n                                totalPriceStatus: 'FINAL',\n                                totalPrice: String(params.options.amount)\n                            },\n                            shippingAddressRequired: params.options.isShippingAddressRequired,\n                            shippingAddressParameters: {\n                                allowedCountryCodes: ['US'],\n                                phoneNumberRequired: true\n                            },\n                            emailRequired: true\n                        });\n                        var cardPaymentMethod = paymentDataRequest.allowedPaymentMethods[0];\n                        cardPaymentMethod.parameters.billingAddressRequired = true;\n                        cardPaymentMethod.parameters.billingAddressParameters = {\n                            format: 'FULL',\n                            phoneNumberRequired: true\n                        };\n                        paymentsClient.loadPaymentData(paymentDataRequest).then(function (paymentData) {\n                            googlePaymentInstance.parseResponse(paymentData, function (err, result) {\n                                if (err) {\n                                    loader.hide();\n                                    // Handle parsing error\n                                }\n                                params.onTokenizePayment(paymentData, result);\n                            });\n                            loader.hide();\n                        }).catch(function (err) {\n                            loader.hide();\n                            // eslint-disable-next-line no-console\n                            console.log(err);\n                        });\n                    }\n                    const button = paymentsClient.createButton({ onClick: onGooglePaymentButtonClicked });\n                    that.$btn.appendChild(button);\n                    loader.hide();\n                }\n            }).catch(function (err) {\n                loader.hide();\n                // eslint-disable-next-line no-console\n                console.log(err);\n            });\n        });\n        // Set up other Braintree components\n    });\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar { isValidInputField } = require('./helper');\nvar scrollAnimate = require('../../../../../../app_storefront_base/cartridge/client/default/js/components/scrollAnimate');\nconst errorText = 'An error occurred. Please try again later or choose different payment method.';\n\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'lpm-error';\n    var $loaderContainter = document.querySelector('.lpmLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.createLocalPayment = function () {\n    var that = this;\n    var params = that.params;\n    // Create a client.\n    braintree.client.create({\n        authorization: params.clientToken\n    }).then(function (clientInstance) {\n        // Create a local payment component.\n        return braintree.localPayment.create({\n            client: clientInstance\n        });\n    }).then(function (localPaymentInstance) {\n        function createLocalPaymentClickListener(type) {\n            var emailField = document.querySelector('#email');\n            return function (event) {\n                event.preventDefault();\n                if (emailField && emailField.value !== '' && !isValidInputField(emailField)) {\n                    that.loader.hide();\n                    return;\n                }\n\n                that.loader.show();\n                document.querySelector('.processingMsg').style.display = 'block';\n                $.getJSON(that.params.getOrderInfoUrl)\n                    .then(({ shippingAddress }) => {\n                        const reqData = Object.assign(createRequestData(\n                            shippingAddress, that.params, type),\n                            { onPaymentStart: (_, start) => start() });\n                        localPaymentInstance.startPayment(reqData).then(({ nonce, details }) => {\n                            var processingMsg = document.querySelector('.processingMsg');\n                            var finalProcessingMsg = document.querySelector('.finalProcessingMsg');\n                            processingMsg.style.display = 'none';\n                            finalProcessingMsg.style.display = 'block';\n                            return $.ajax({\n                                url: params.paymentConfirmUrl,\n                                type: 'POST',\n                                contentType: 'application/json',\n                                data: JSON.stringify({\n                                    nonce: nonce,\n                                    lpmName: type,\n                                    details: details\n                                })\n                            });\n                        }).then(({ redirectUrl }) => {\n                            that.loader.hide();\n                            window.location.href = redirectUrl;\n                        }).catch(function () {\n                            that.loader.hide();\n                        });\n                    })\n                    .catch(function (err) {\n                        if (err.responseText !== '') { errorText = err.responseText; }\n                        that.loader.hide();\n                        $('.error-message').show();\n                        $('.error-message-text').text(errorText);\n                        scrollAnimate($('.error-message'));\n                    });\n            };\n        }\n        var paymentMethod = that.$btn.dataset.localPaymentMethodName;\n        that.$btn.addEventListener('click', createLocalPaymentClickListener(paymentMethod));\n    });\n};\n\nfunction createRequestData(shippingData, params, type) {\n    var recipientName = shippingData.recipientName.split(' ');\n    shippingData.firstName = recipientName[0];\n    shippingData.lastName = recipientName[1];\n    return {\n        paymentType: type,\n        amount: params.options.amount,\n        fallback: {\n            url: params.fallbackUrl + '?lpmName=' + type,\n            buttonText: 'Complete Payment'\n        },\n        currencyCode: params.options.currency,\n        shippingAddressRequired: false,\n        email: document.querySelector('#email').value,\n        phone: shippingData && shippingData.phone,\n        givenName: shippingData && shippingData.firstName,\n        surname: shippingData && shippingData.lastName,\n        address: {\n            countryCode: shippingData && shippingData.countryCode\n        }\n    };\n}\n\nConstructor.prototype.updateShippingData = function () {\n    var localIns = this;\n    localIns.loader.show();\n    return $.getJSON(localIns.params.getOrderInfoUrl);\n};\n\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    if (data) {\n        var recipientName = data.recipientName.split(' ');\n        data.firstName = recipientName[0];\n        data.lastName = recipientName[1];\n        this.shippingData = data;\n    }\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","'use strict';\n\nmodule.exports = function () {\n    /* global braintreeUtils braintree $ */\n    var helper = require('./helper');\n    var applepayHelper = require('./applepay/applepayHelper');\n    var creditcardHelper = require('./creditcard/creditcardHelper');\n    var creditcardPayment = require('./creditcard/creditcardPayment');\n    var creditCardFields = require('./creditcard/creditcardFields');\n    var creditCardAccount = require('./creditcard/creditcardAccount');\n    var minicartHelper = require('./paypal/minicartHelper');\n    var paypalAccount = require('./paypal/paypalAccount');\n    var paypalPayment = require('./paypal/paypalPayment');\n    var paypalHelper = require('./paypal/paypalHelper');\n    var paypalSavedAccountHandler = require('./paypal/paypalSavedAccountHandler');\n    var local = require('./local/localPayment'); // eslint-disable-line no-unused-vars\n    var orderStage = document.getElementById('checkout-main');\n    var pageState = sessionStorage.getItem('pageState');\n\n    var $form = document.querySelector('#dwfrm_billing'); // eslint-disable-line no-unused-vars\n    var $cartPage = document.querySelectorAll('.cart-page');\n    var $continueButton = document.querySelector('button.submit-payment');\n    var $summaryDetails = document.querySelector('.summary-details .payment-details');\n    var $addCreditCardForm = document.querySelector('.js_braintree_addCreditCardForm');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $creditCardContent = document.querySelector('.js_braintree_creditCardContent');\n    var $applepayContent = document.querySelector('.js_braintree_applepayContent');\n    var $braintreePaypalNonce = document.querySelector('#braintreePaypalNonce');\n    var $minicartPopover = document.querySelector('.minicart .popover');\n    var $creditCardList = document.querySelector('#braintreeCreditCardList');\n    var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n\n    var venmoAccount = require('./venmo/venmoAccount');\n    var venmoPayment = require('./venmo/venmoPayment');\n    var $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\n    var googlePayAccount = require('./googlepay/googlepayAccount');\n    var googlepayPayment = require('./googlepay/googlepayPayment');\n    var googlepayHelper = require('./googlepay/googlepayHelper');\n    var $googlepayContent = document.querySelector('.js_braintree_googlepayContent');\n    var $googlepayOnCart = document.querySelector('.braintree-cart-google-button');\n    var $addGooglePayAccountForm = document.querySelector('.js_braintree_addGooglePayAccountForm');\n    var $braintreeGooglePayNonce = document.querySelector('#braintreeGooglePayNonce');\n\n    var braintreeSrc = require('./src/srcPayment');\n    var $srcContent = document.querySelector('.js_braintree_srcContent');\n\n    if (window.NodeList && !NodeList.prototype.forEach) {\n        NodeList.prototype.forEach = Array.prototype.forEach;\n    }\n\n    (function () {\n        if (typeof window.CustomEvent === 'function') return false; // If not IE\n\n        function CustomEvent(event, params) {\n            // eslint-disable-next-line no-param-reassign\n            params = params || { bubbles: false, cancelable: false, detail: undefined };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n    }());\n\n    if ($cartPage) {\n        helper.initWathcherCartUpdate();\n    }\n\n    if ($addCreditCardForm) {\n        creditCardAccount.initAccountAddCreditCard();\n    }\n\n    if ($addGooglePayAccountForm) {\n        googlePayAccount.initAddGooglePayAccount();\n    }\n\n    document.addEventListener('DOMContentLoaded', function () {\n        minicartHelper.miniCartButton();\n    });\n\n    if ($minicartPopover) {\n        minicartHelper.observer.observe($minicartPopover, { childList: true });\n    }\n\n    helper.paymentMethodChangeHandle(document.querySelector('.payment-options[role=tablist] a.active[data-toggle=\"tab\"]'));\n\n    if ($cartPage.length) {\n        applepayHelper.initApplepayButton();\n    }\n\n    if ($paypalContent) {\n        paypalPayment.makePaypalPayment($continueButton);\n    }\n\n    if ($creditCardContent) {\n        creditCardFields.initCreditCardFields();\n        creditcardHelper.initCardListAndSaveFunctionality();\n\n        $('body').on('checkout:updateCheckoutView', creditCardFields.updateData);\n\n        creditCardFields.updateData();\n\n        if ($creditCardList) {\n            $creditCardList.addEventListener('change', function () {\n                creditcardPayment.doNotAllowSubmitForm();\n            });\n        }\n        $('body').on('braintree:3dSecure_content_shown', function () {\n            helper.continueButtonToggle(false);\n        });\n\n        $('body').on('braintree:3dSecure_content_removed', function () {\n            setTimeout(function () {\n                creditcardPayment.hide3DSecureContainer();\n            }, 2000);\n        });\n\n        $continueButton.addEventListener('click', function (event) {\n            if (!event.isTrusted) {\n                return;\n            }\n            if (helper.isNonceExist('Paypal')) {\n                paypalHelper.updatePayPalAppearance();\n            } else if (helper.isNonceExist('GooglePay')) {\n                googlepayHelper.removeSessionAccount();\n            }\n            creditcardPayment.makeCreditCardPayment(event);\n        });\n    }\n\n    if ($applepayContent) {\n        applepayHelper.applepayPayment($continueButton);\n    }\n\n    if ($venmoContent) {\n        venmoPayment.makeVenmoPayment($continueButton);\n    }\n\n    if ($googlepayContent || $googlepayOnCart) {\n        googlepayPayment.makeGooglepayPayment($continueButton);\n    }\n\n    if ($srcContent) {\n        braintreeSrc.initSrcButton($continueButton);\n    }\n\n    $('.payment-options[role=tablist] a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n        helper.paymentMethodChangeHandle(e.target);\n        const cardList = document.getElementById('braintreeCreditCardList');\n        const paypalList = document.getElementById('braintreePaypalAccountsList');\n        var changeEvent;\n\n        if (e.target.hash === '#creditcard-content' && cardList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                cardList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            cardList.dispatchEvent(changeEvent);\n        } else if (e.target.hash === '#paypal-content' && paypalList) {\n            if (typeof (Event) === 'function') {\n                changeEvent = new Event('changeEvent');\n                paypalList.addEventListener('changeEvent', function () {\n                    'change';\n                }, false);\n            } else {\n                changeEvent = document.createEvent('Event');\n                changeEvent.initEvent('changeEvent', true, true);\n            }\n            paypalList.dispatchEvent(changeEvent);\n        }\n    });\n\n    if ($summaryDetails) {\n        $summaryDetails.classList.add('braintree-payment-details');\n        $summaryDetails.classList.remove('payment-details');\n    }\n\n    $('body').on('checkout:updateCheckoutView', helper.updateCheckoutView);\n\n    if ((pageState && pageState === 'cart') &&\n        orderStage && orderStage.getAttribute('data-checkout-stage') === 'placeOrder') {\n        helper.updatePaymentMethodTab();\n        sessionStorage.removeItem('pageState');\n    }\n\n    if ($braintreePaypalNonce && $braintreePaypalNonce.value !== '') {\n        document.querySelector('.paypal-tab').click();\n    }\n\n    if ($braintreeGooglePayNonce && $braintreeGooglePayNonce.value !== '') {\n        document.querySelector('.googlepay-tab').click();\n    }\n\n    if ($staticPaypalButton) {\n        paypalSavedAccountHandler.paypalStaticPdpButtonHandler();\n        $staticPaypalButton.addEventListener('click', paypalSavedAccountHandler.staticImageHandler);\n    }\n\n    // My account page\n    if (document.querySelector('.add-paypal-account')) {\n        paypalAccount.initPayPalEvents();\n    }\n    if (document.querySelector('.add-venmo-account')) {\n        venmoAccount.initVenmoEvents();\n    }\n    if (document.querySelector('.creditCard-accounts')) {\n        helper.initCardEvents();\n    }\n\n    if (document.querySelector('.paypal-accounts')) {\n        document.querySelector('.paypal-accounts').onclick = function (e) {\n            helper.removeBtPayment(e);\n        };\n    }\n    if (document.querySelector('.venmo-accounts')) {\n        document.querySelector('.venmo-accounts').onclick = function (e) {\n            helper.removeBtPayment(e);\n        };\n    }\n};\n","/* eslint-disable no-inner-declarations */\n/* eslint-disable new-cap */\n'use strict';\n\n/* global braintreeUtils braintree paypal $ */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar paypalHelper = require('./paypal/paypalHelper');\n\nvar bu = braintreeUtils;\nvar console = bu.console;\n\nvar pid;\nvar uuid;\nvar removeFromCartUrl;\nvar loader;\nvar $price;\nvar sdkUrlConfiguration;\nvar isZeroAmount = false;\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\nvar $miniCartQuantity = document.querySelector('.minicart-quantity');\nvar $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\nvar $paypalCartButton = document.querySelector('.js_braintree_paypal_cart_button');\nvar $paypalBillingButton = document.querySelector('.js_braintree_paypal_billing_button');\n\nfunction Constructor(initParams, $btn) {\n    var params = initParams;\n    this.params = initParams;\n    params.options = params.options || {};\n\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n\n    if (params.$errorContainer) {\n        $errorContainer = params.$errorContainer;\n        delete params.$errorContainer;\n    }\n\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var $braintreePaypalRiskDataInput = document.querySelector('input[name=braintreePaypalRiskData]');\n\n    if (params.$loaderContainer) {\n        $loaderContainter = params.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    var that = this;\n\n    if (params.isFraudToolsEnabled) {\n        loader.show();\n        braintree.dataCollector.create({\n            authorization: bu.clientToken,\n            paypal: true,\n            kount: false\n        }, function (error, data) {\n            loader.hide();\n            if (error) {\n                console.log(error);\n                return;\n            }\n            if ($braintreePaypalRiskDataInput) {\n                $braintreePaypalRiskDataInput.value = data.deviceData;\n            }\n            params.riskData = data.deviceData;\n        });\n    }\n\n    if ($braintreePDPButton) {\n        $price = document.querySelector('.price .sales .value');\n        // Check minicart quantity and hide PDPbutton if it is not empty\n        if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\n            || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\n            paypalHelper.hidePDPButton($braintreePDPButton);\n        }\n    }\n\n    loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }).then(function (clientInstance) {\n        return braintree.paypalCheckout.create({\n            client: clientInstance\n        });\n    }).then(function (paypalCheckoutInstance) {\n        if ($braintreePDPButton) {\n            if ($addToCartButton.disabled) {\n                paypalHelper.hidePDPButton($braintreePDPButton);\n            }\n            $('body').on('cart:update', function () {\n                $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                if ($addToCartButton.disabled) {\n                    paypalHelper.hidePDPButton($braintreePDPButton);\n                }\n                if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                    paypalHelper.showPDPButton($braintreePDPButton);\n                }\n            });\n\n            $('body').on('product:afterAddToCart', function () {\n                paypalHelper.hidePDPButton($braintreePDPButton);\n            });\n\n            // Update addToCart button status\n            $('body').on('product:statusUpdate', function () {\n                $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n                $price = document.querySelector('.price .sales .value');\n                isZeroAmount = false;\n                if ($braintreePDPButton && $price) {\n                    isZeroAmount = $price.getAttribute('content') === '0.00';\n                }\n\n                if ($miniCartQuantity === 0) {\n                    if ($addToCartButton.disabled || isZeroAmount) {\n                        paypalHelper.hidePDPButton($braintreePDPButton);\n                    }\n                    if (!$addToCartButton.disabled && !isZeroAmount) {\n                        paypalHelper.showPDPButton($braintreePDPButton);\n                    }\n                }\n            });\n        }\n\n        var payment = function () {\n            if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                that.er.hide();\n                var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n                if (res.cart) {\n                    uuid = res.pliUUID;\n                    removeFromCartUrl = res.cart.actionUrls.removeProductLineItemUrl;\n                    pid = res.pid;\n                    that.params.options.amount = parseFloat(res.cart.totals.grandTotal.replace(/\\$|,/g, ''));\n                } else {\n                    throw new Error(res.message || 'Error occurs');\n                }\n            }\n            return paypalCheckoutInstance.createPayment(that.params.options);\n        };\n\n        var paypalButtonConfig = {\n            locale: params.options.locale,\n            onApprove: function (data) {\n                if (params.options.intent === 'order') {\n                    data.intent = 'order';\n                }\n                return paypalCheckoutInstance.tokenizePayment(data).then(function (payload) {\n                    params.onTokenizePayment(payload, that);\n                });\n            },\n            onCancel: function (a, b) {\n                if (typeof params.options.onCancel === 'function') {\n                    params.options.onCancel(a, b);\n                }\n                if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n                    var urlParams = {\n                        pid: pid,\n                        uuid: uuid\n                    };\n\n                    $.ajax({\n                        url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                        type: 'get',\n                        dataType: 'json',\n                        success: function () {\n                            $.spinner().stop();\n                        },\n                        error: function () {\n                            $.spinner().stop();\n                        }\n                    });\n                }\n            },\n            onError: function (err) {\n                that.er.show(err.message.split(/\\r?\\n/g)[0]);\n\n                if ($braintreePDPButton && $braintreePDPButton.style.display === '' && pid) {\n                    var productID = pid;\n                    var urlParams = {\n                        pid: productID,\n                        uuid: uuid\n                    };\n\n                    $.ajax({\n                        url: paypalHelper.appendToUrl(removeFromCartUrl, urlParams),\n                        type: 'get',\n                        dataType: 'json',\n                        success: function () {\n                            $.spinner().stop();\n                        },\n                        error: function () {\n                            $.spinner().stop();\n                        }\n                    });\n                }\n            }\n        };\n\n        isZeroAmount = that.params.options.amount === 0;\n        if (isZeroAmount) {\n            var zeroAmountErrorMsg = 'Order total 0 is not allowed for PayPal';\n            paypalButtonConfig.onClick = function (_, actions) {\n                if ($paypalCartButton) paypalHelper.showCartErrorMsg(zeroAmountErrorMsg);\n                if ($paypalBillingButton) paypalHelper.showCheckoutErrorMsg(zeroAmountErrorMsg);\n                return actions.reject();\n            };\n        }\n\n        if (params.options && params.options.flow === 'checkout') {\n            paypalButtonConfig.createOrder = payment;\n            sdkUrlConfiguration = {\n                intent: params.options.intent,\n                currency: params.options.currency,\n                components: 'buttons,messages',\n                commit: false\n            };\n        } else {\n            paypalButtonConfig.createBillingAgreement = payment;\n            sdkUrlConfiguration = {\n                vault: true,\n                components: 'buttons,messages'\n            };\n        }\n\n        paypalButtonConfig = $.extend(false, paypalButtonConfig, that.params.paypalConfig);\n        loader.hide();\n\n        if (!window.isPayPalSDKLoaded) {\n            paypalCheckoutInstance.loadPayPalSDK(sdkUrlConfiguration).then(function () {\n                window.isPayPalSDKLoaded = true;\n                return paypal.Buttons(paypalButtonConfig).render(that.$btn);\n            });\n        } else {\n            return paypal.Buttons(paypalButtonConfig).render(that.$btn);\n        }\n    }).catch(function (err) {\n        console.error('Error!', err);\n        loader.hide();\n    });\n}\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nConstructor.prototype.updateShippingAddress = function (data) {\n    this.params.options.shippingAddressOverride = data;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        $.extend(bu.messages, params.messages);\n        return new Constructor(params, $btn);\n    }\n};\n","/* eslint-disable no-undef */\n'use strict';\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\nvar bu = braintreeUtils;\nvar loader;\n\nfunction Constructor(initParams, $btn) {\n    this.$btn = $btn;\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'error';\n    var $loaderContainter = document.querySelector('.braintreeSrcLoader');\n    loader = loaderInstance($loaderContainter);\n    this.loader = loader;\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n    this.params = initParams;\n    this.er = bu.createErrorInstance($errorContainer);\n}\n\nConstructor.prototype.loadSrcButton = function () {\n    var that = this;\n    var params = that.params;\n\n    // TODO Fix loader.\n    loader.show();\n    braintree.client.create({\n        authorization: params.clientToken\n    }, function (clientErr, clientInstance) {\n        if (clientErr) {\n            that.er.show(clientErr);\n            loader.hide();\n            return;\n        }\n        // Create a Visa Checkout component.\n        braintree.visaCheckout.create({\n            client: clientInstance\n        }, function (srcPaymentErr, visaCheckoutInstance) {\n            if (srcPaymentErr) {\n                that.er.show(srcPaymentErr);\n                loader.hide();\n                return;\n            }\n            var baseInitOptions = {\n                paymentRequest: {\n                    currencyCode: 'USD',\n                    subtotal: params.options.amount\n                }\n            };\n\n            var initOptions = visaCheckoutInstance.createInitOptions(baseInitOptions);\n            initOptions.settings.shipping = {\n                collectShipping: params.options.isShippingAddressRequired\n            };\n            V.init(initOptions);\n            V.on('payment.success', function (payment) {\n                visaCheckoutInstance.tokenize(payment, function (tokenizeErr, payload) {\n                    if (tokenizeErr) {\n                        console.error('Error during Visa Checkout tokenization', tokenizeErr);\n                    } else {\n                        var billingAddress = payload.billingAddress;\n                        payload.billingAddressString = JSON.stringify({\n                            recipientName: (billingAddress.firstName + ' ' + billingAddress.lastName),\n                            phone: billingAddress.phoneNumber,\n                            countryCodeAlpha2: billingAddress.countryCode,\n                            streetAddress: billingAddress.streetAddress,\n                            extendedAddress: billingAddress.streetAddress,\n                            locality: billingAddress.locality,\n                            region: billingAddress.region,\n                            postalCode: billingAddress.postalCode,\n                            email: payload.userData.userEmailbillingAddress\n                        });\n                        params.onTokenizePayment(payload);\n                    }\n                });\n            });\n        });\n    });\n};\n\nConstructor.prototype.updateAmount = function (amount) {\n    this.params.options.amount = amount;\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        bu.clientToken = params.clientToken;\n        return new Constructor(params, $btn);\n    }\n};\n","'use strict';\n\n/* global braintree $ */\n/* eslint no-console: 'off' */\n\nvar isDebugMode = true;\nif (console && isDebugMode) {\n    var consoleLog = console.log;\n    var consoleError = console.error;\n    console.log = function () {\n        consoleLog.apply(console, arguments);\n    };\n    console.error = function () {\n        consoleError.apply(console, arguments);\n    };\n} else {\n    console = { // eslint-disable-line no-global-assign\n        log: function () { },\n        error: function () { }\n    };\n}\n\nvar bu = {\n    pdpOnlickForAsignedPaypalPayment: function () {\n        var $bundleItem = $('.bundle-item');\n        function getOptions($productContainer) {\n            var options = $productContainer\n                .find('.product-option')\n                .map(function () {\n                    var $elOption = $(this).find('.options-select');\n                    var urlValue = $elOption.val();\n                    var selectedValueId = $elOption.find('option[value=\"' + urlValue + '\"]')\n                        .data('value-id');\n                    return {\n                        optionId: $(this).data('option-id'),\n                        selectedValueId: selectedValueId\n                    };\n                }).toArray();\n\n            return JSON.stringify(options);\n        }\n\n        var pid = $('.product-detail:not(\".bundle-item\")').data('pid');\n        var $btn = $('.braintree_pdp_button');\n        var $productContainer = $btn.closest('.product-detail');\n\n        var form = {\n            pid: pid,\n            quantity: $('.quantity-select').val()\n        };\n\n        if (!$bundleItem.length) {\n            form.options = getOptions($productContainer);\n        } else {\n            var items = $bundleItem.map(function () {\n                return {\n                    pid: $(this).find('.product-id').text(),\n                    quantity: parseInt($(this).find('label.quantity').data('quantity'), 10)\n                };\n            });\n            form.childProducts = JSON.stringify(items.toArray());\n        }\n        var response = $.ajax({\n            url: $('.add-to-cart-url').val(),\n            method: 'POST',\n            async: false,\n            data: form\n        }).responseJSON;\n        response.pid = pid;\n        return response;\n    },\n\n    getSelectedData: function (selectEl) {\n        if (!selectEl) {\n            return null;\n        }\n        var options = selectEl.getElementsByTagName('option');\n        var option = null;\n        for (var i = 0; i < options.length; i++) {\n            option = options[i];\n            if (option.selected) {\n                break;\n            }\n        }\n        return option.attributes;\n    },\n\n    postData: function (url, data) {\n        var formData = new FormData();\n\n        for (var key in data) {\n            formData.append(key, data[key]);\n        }\n        $.ajax({\n            url: url,\n            data: formData,\n            processData: false,\n            contentType: false,\n            type: 'POST',\n            success: function (res) {\n                window.location.href = res.redirectUrl;\n            },\n            error: function () {\n                location.reload();\n            }\n        });\n    },\n\n    messages: {},\n\n    errorInstances: [],\n    createErrorInstance: function (containerElement, callback) {\n        if (!containerElement) {\n            console.error('Braintree: No container for showing erros');\n        }\n        function Constructor(cb) {\n            bu.errorInstances.push(this);\n            this.containerEl = containerElement;\n            this.cb = typeof cb === 'function' ? cb : function () { };\n        }\n        Constructor.prototype.show = function (error) {\n            var text = '';\n            if (typeof error === 'string') {\n                text = error;\n            }\n            if (typeof error === 'object') {\n                var msg = bu.messages[error.code];\n                text = msg || error.message;\n                this.cb(this, error);\n                if (error.code === 'PAYPAL_POPUP_CLOSED') {\n                    return;\n                }\n            }\n            this.containerEl.style.display = '';\n            this.containerEl.innerHTML = text;\n        };\n        Constructor.prototype.hide = function () {\n            this.containerEl.innerHTML = '';\n        };\n        return new Constructor(callback);\n    },\n    clientToken: null\n};\n\nbu.console = console;\n\nmodule.exports = bu;\n\n","/* eslint-disable no-use-before-define */\n'use strict';\n\n/* global braintreeUtils braintree $ VenmoSession */\nvar braintreeUtils = require('./braintreeUtils');\nvar loaderInstance = require('./loaderHelper');\n\nvar bu = braintreeUtils;\n\nfunction Constructor(initParams, $btn) {\n    var $errorContainer = document.createElement('div');\n    $errorContainer.className = 'venmo-error';\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'braintree-loader';\n    this.$braintreeVenmoRiskDataInput = document.querySelector('input[name=braintreeVenmoRiskData]');\n\n    this.$btn = $btn;\n    this.params = initParams;\n\n    if (initParams.$errorContainer) {\n        $errorContainer = initParams.$errorContainer;\n        delete initParams.$errorContainer;\n    }\n\n    if (initParams.$loaderContainer) {\n        $loaderContainter = initParams.$loaderContainer;\n    }\n\n    $btn.parentNode.insertBefore($errorContainer, $btn.nextSibling);\n\n    this.er = bu.createErrorInstance($errorContainer);\n    this.loader = loaderInstance($loaderContainter);\n}\n\nConstructor.prototype.createVenmo = function () {\n    var that = this;\n    var isBrowserSupported;\n    that.loader.show();\n\n    braintree.client.create({\n        authorization: bu.clientToken\n    }, function (clientErr, clientInstance) {\n            // Stop if there was a problem creating the client.\n            // This could happen if there is a network error or if the authorization\n            // is invalid.\n        if (clientErr) {\n            that.er.show(clientErr);\n            return;\n        }\n\n        braintree.dataCollector.create({\n            client: clientInstance,\n            paypal: true\n        }, function (dataCollectorErr, dataCollectorInstance) {\n            if (dataCollectorErr) {\n                that.er.show(dataCollectorErr);\n                return;\n            }\n\n            if (that.$braintreeVenmoRiskDataInput) {\n                that.$braintreeVenmoRiskDataInput.value = dataCollectorInstance.deviceData;\n            }\n            that.loader.hide();\n        });\n\n        isBrowserSupported = braintree.venmo.isBrowserSupported({ allowNewBrowserTab: false });\n        // Verify browser support before proceeding.\n        if (isBrowserSupported) {\n            braintree.venmo.create({\n                client: clientInstance,\n                allowNewBrowserTab: false,\n                ignoreHistoryChanges: true\n            }, function (venmoErr, venmoInstance) {\n                if (venmoErr) {\n                    that.er.show(venmoErr);\n                    return;\n                }\n\n                        // Verify browser support before proceeding.\n                if (!venmoInstance.isBrowserSupported()) {\n                    that.params.deviceNotSupportVenmo();\n                    that.loader.hide();\n                    return;\n                }\n\n                that.$btn.addEventListener('click', function () {\n                    if (!that.params.venmoAccountPage && !that.params.onClick()) {\n                        return;\n                    }\n                    venmoInstance.tokenize({ processResultsDelay: 10 }, function (tokenizeErr, payload) {\n                        that.loader.show();\n\n                        if (tokenizeErr) {\n                            handleVenmoError(tokenizeErr);\n                        } else {\n                            handleVenmoSuccess(payload);\n                        }\n                    });\n                    return;\n                });\n            });\n        } else {\n            that.params.deviceNotSupportVenmo();\n            that.loader.hide();\n            localStorage.setItem('venmoBrowserSupported', isBrowserSupported);\n            return;\n        }\n    });\n\n    function handleVenmoError(err) {\n        that.er.show(err);\n        that.loader.hide();\n    }\n    function handleVenmoSuccess(payload) {\n        that.params.onTokenizePayment(payload);\n        that.loader.hide();\n    }\n};\n\nmodule.exports = {\n    init: function (params, $btn) {\n        var ins = new Constructor(params, $btn);\n        bu.clientToken = params.clientToken;\n        return ins.createVenmo();\n    }\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\nvar creditCardFields = require('./creditcardFields');\n\nfunction submitCreditCardForm() {\n    $('.js_braintree_addCreditCardForm').submit(function () {\n        var addCreditCardForm = $(this);\n        creditCard.startTokenize(function (result) {\n            if (result.error) return;\n            addCreditCardForm.spinner().start();\n            $.ajax({\n                url: addCreditCardForm.attr('action'),\n                type: 'post',\n                dataType: 'json',\n                data: addCreditCardForm.serialize(),\n                success: function (data) {\n                    addCreditCardForm.spinner().stop();\n                    if (!data.success) {\n                        document.querySelector('#braintreeCreditCardErrorContainer').textContent = data.error;\n                    } else {\n                        location.href = data.redirectUrl;\n                    }\n                },\n                error: function (err) {\n                    if (err.responseJSON.redirectUrl) {\n                        window.location.href = err.responseJSON.redirectUrl;\n                    }\n                    addCreditCardForm.spinner().stop();\n                }\n            });\n        });\n        return false;\n    });\n}\n\nfunction initAccountAddCreditCard() {\n    creditCardFields.initCreditCardFields();\n    submitCreditCardForm();\n}\n\nmodule.exports = {\n    initAccountAddCreditCard\n};\n","'use strict';\nvar creditCard = require('../braintreeCreditCard');\n\nvar $continueButton = document.querySelector('button.submit-payment');\n\n/**\n * Gets required Additional shipping info for 3ds\n *\n * @param {Object} orderAddress - User's shipping address\n * @returns {Object} an object with required fields\n */\n\nfunction getShippingAdditionalInfo(orderAddress) {\n    return {\n        workPhoneNumber: orderAddress.phone,\n        shippingGivenName: orderAddress.recipientName.split(' ').slice(0, -1).join(' '),\n        shippingSurname: orderAddress.recipientName.split(' ').slice(-1).join(' '),\n        shippingPhone: orderAddress.phone,\n        shippingAddress: {\n            streetAddress: orderAddress.line1,\n            extendedAddress: orderAddress.line2,\n            locality: orderAddress.city,\n            region: orderAddress.state,\n            postalCode: orderAddress.postalCode,\n            countryCodeAlpha2: orderAddress.countryCode\n        }\n    };\n}\n\nfunction updateData() {\n    $.ajax({\n        url: document.querySelector('.js_braintree_getOrderInfoUrl').value,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            data.shippingAdditionalInfo = data.shippingAddress ? getShippingAdditionalInfo(data.shippingAddress) : null;\n            creditCard.updateData(data);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction initCreditCardFields() {\n    document.querySelectorAll('.js_braintree_creditCardFields').forEach(function (el) {\n        var $container = el;\n        if (JSON.parse($container.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($container.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, '.js_braintree_creditCardFields has not valid data-braintree-config');\n            return;\n        }\n        config.continueButton = $continueButton;\n        creditCard.initFields(config, $container);\n        $container.setAttribute('data-is-inited', true);\n    });\n}\n\nmodule.exports = {\n    initCreditCardFields,\n    getShippingAdditionalInfo,\n    updateData\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar bu = braintreeUtils;\n\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\nvar $creditCardMakeDefault = document.querySelector('#braintreeDefaultCard');\nvar $saveCreditCard = document.querySelector('#braintreeSaveCreditCard');\nvar $cardOwner = document.querySelector('#braintreeCardOwner');\n\nfunction creditcardErrorContainer(errorIns, errorData) {\n    var error = errorData;\n    if (error.details && error.details.invalidFieldKeys) {\n        for (var i = 0; i < error.details.invalidFieldKeys.length; i++) {\n            var key = error.details.invalidFieldKeys[i];\n            if (key === 'number') {\n                document.querySelector('#braintreeCardNumber').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'cvv') {\n                document.querySelector('#braintreeCvv').classList.add('braintree-hosted-fields-invalid');\n            }\n            if (key === 'expirationDate') {\n                document.querySelector('#braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n            }\n        }\n    }\n    if (error.code === 'HOSTED_FIELDS_FIELDS_EMPTY') {\n        document.querySelector('#braintreeCardNumber, #braintreeCvv, #braintreeExpirationDate').classList.add('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction convertCardTypeToDwFormat(braintreeType) {\n    switch (braintreeType) {\n        case 'American Express':\n            return 'Amex';\n        case 'MasterCard':\n            return 'Master';\n        default:\n            return braintreeType;\n    }\n}\n\nfunction cardOwnerUpdateClasses() {\n    var value = $cardOwner.value;\n    if (value.length <= parseInt($cardOwner.getAttribute('maxlength'), 10) && value.length !== 0) {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-valid');\n    } else {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-valid');\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n    }\n}\n\nfunction cardListChange() {\n    var $cardOwnerPh = document.querySelector('#braintreeCardOwnerPh');\n    var $cardNumbeber = document.querySelector('#braintreeCardNumber');\n    var $cardNumbeberPh = document.querySelector('#braintreeCardNumberPh');\n    var $cardCvv = document.querySelector('#braintreeCvv');\n    var $cardCvvPh = document.querySelector('#braintreeCvvPh');\n    var $cardExpiration = document.querySelector('#braintreeExpirationDate');\n    var $cardExpirationPh = document.querySelector('#braintreeExpirationPh');\n    var $braintreeSaveCardContainer = document.querySelector('#braintreeSaveCardContainer');\n    var $creditCardFieldsContainer = document.querySelector('#braintreeCreditCardFieldsContainer');\n    var $braintree3DSecureContainer = document.querySelector('#braintree3DSecureContainer');\n    var $saveCardAndDefaultContainer = document.querySelector('#braintreeSaveCardAndDefaultContainer');\n    var changeCardOwnerInput;\n    if ($cardOwner) {\n        if (typeof (Event) === 'function') {\n            changeCardOwnerInput = new Event('changeCardOwnerInput');\n            $cardOwner.addEventListener('changeCardOwnerInput', function () {\n                'change';\n            }, false);\n        } else {\n            changeCardOwnerInput = document.createEvent('Event');\n            changeCardOwnerInput.initEvent('changeCardOwnerInput', true, true);\n        }\n    }\n\n    if ($creditCardFieldsContainer) {\n        $creditCardFieldsContainer.style.display = '';\n    }\n    if ($braintree3DSecureContainer) {\n        $braintree3DSecureContainer.style.display = 'none';\n    }\n\n    document.querySelector('#braintreeCreditCardErrorContainer').textContent = '';\n\n    if (!$creditCardList || $creditCardList.value === 'newcard') {\n        if ($saveCardAndDefaultContainer) {\n            $saveCardAndDefaultContainer.style.display = '';\n        }\n        $cardNumbeberPh.style.display = 'none';\n        $cardExpirationPh.style.display = 'none';\n        $cardCvvPh.style.display = 'none';\n        $cardOwnerPh.style.display = 'none';\n        $cardOwner.value = $cardOwner.getAttribute('data-new-cart-value');\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        $cardOwner.style.display = '';\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardNumbeber.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardCvv.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardExpiration.parentNode.classList.remove('braintree-hosted-fields-invalid');\n        $cardOwner.disabled = false;\n        $cardCvv.style.display = '';\n        $cardNumbeber.style.display = '';\n        $cardExpiration.style.display = '';\n        if ($braintreeSaveCardContainer) {\n            $braintreeSaveCardContainer.style.display = '';\n            $saveCreditCard.checked = true;\n            $saveCreditCard.disabled = false;\n        }\n        if ($creditCardMakeDefault) {\n            $creditCardMakeDefault.disabled = false;\n        }\n        cardOwnerUpdateClasses();\n        if ($creditCardList) {\n            document.querySelector('#braintreeCardPaymentMethod').value = $creditCardList[0].getAttribute('data-payment-method');\n        }\n    } else {\n        var selectedCard = bu.getSelectedData($creditCardList);\n        $cardNumbeberPh.innerHTML = selectedCard['data-number'].value;\n        $cardCvvPh.innerHTML = '***';\n        $cardExpirationPh.innerHTML = selectedCard['data-expiration'].value;\n        $cardOwnerPh.innerHTML = selectedCard['data-owner'].value;\n        $cardOwner.value = selectedCard['data-owner'].value;\n        $cardOwner.dispatchEvent(changeCardOwnerInput);\n        document.querySelector('#braintreeCardType').value = selectedCard['data-type'].value;\n        document.querySelector('#braintreeCardMaskNumber').value = selectedCard['data-number'].value;\n        $cardNumbeberPh.style.display = '';\n        $cardExpirationPh.style.display = '';\n        $cardCvvPh.style.display = '';\n        $cardOwnerPh.style.display = '';\n        $cardOwner.style.display = 'none';\n        if ($creditCardMakeDefault) {\n            if (selectedCard['data-default'].value === 'true') {\n                $creditCardMakeDefault.disabled = true;\n            } else {\n                $creditCardMakeDefault.disabled = false;\n            }\n            $creditCardMakeDefault.checked = true;\n        }\n        $cardOwner.disabled = true;\n        $cardCvv.style.display = 'none';\n        $cardNumbeber.style.display = 'none';\n        $cardExpiration.style.display = 'none';\n        if ($braintreeSaveCardContainer) {\n            $saveCreditCard.checked = false;\n            $braintreeSaveCardContainer.style.display = 'none';\n        }\n\n        document.querySelector('#braintreeCardPaymentMethod').value = selectedCard['data-payment-method'].value.toUpperCase();\n    }\n}\n\nfunction makeCardDefault() {\n    if ($saveCreditCard.checked) {\n        $creditCardMakeDefault.disabled = false;\n        $creditCardMakeDefault.checked = true;\n    } else {\n        $creditCardMakeDefault.disabled = true;\n        $creditCardMakeDefault.checked = false;\n    }\n}\n\nfunction initCardListAndSaveFunctionality() {\n    if ($saveCreditCard) {\n        $saveCreditCard.addEventListener('change', function () {\n            makeCardDefault();\n        });\n    }\n\n    if ($creditCardList) {\n        $creditCardList.addEventListener('change', function () {\n            cardListChange();\n        });\n    }\n    cardListChange();\n}\n\nfunction cardOwnerEvents() {\n    $cardOwner.addEventListener('focus', function () {\n        $cardOwner.parentNode.classList.add('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('blur', function () {\n        $cardOwner.parentNode.classList.remove('braintree-hosted-fields-focused');\n    });\n    $cardOwner.addEventListener('keyup', function () {\n        document.querySelector('#braintreeCardOwner').setAttribute('data-new-cart-value', $cardOwner.value);\n        cardOwnerUpdateClasses();\n    });\n    $cardOwner.addEventListener('change', function () {\n        cardOwnerUpdateClasses();\n    });\n}\n\nmodule.exports = {\n    creditcardErrorContainer,\n    convertCardTypeToDwFormat,\n    cardOwnerEvents,\n    initCardListAndSaveFunctionality\n};\n","'use strict';\n\nvar braintreeUtils = require('../braintreeUtils');\nvar creditCard = require('../braintreeCreditCard');\nvar helper = require('../helper');\n\nvar $continueButton = document.querySelector('button.submit-payment');\nvar $creditCardList = document.querySelector('#braintreeCreditCardList');\n\nfunction doNotAllowSubmitForm() {\n    helper.continueButtonToggle(false);\n    $continueButton.setAttribute('data-is-allow-submit-form', false);\n}\n\nfunction hide3DSecureContainer() {\n    document.querySelector('#braintreeCreditCardFieldsContainer').style.display = '';\n    document.querySelector('#braintreeSaveCardAndDefaultContainer').style.display = '';\n    document.querySelector('#braintree3DSecureContainer').style.display = 'none';\n    doNotAllowSubmitForm();\n}\n\nfunction allowSubmitForm(event) {\n    $continueButton.setAttribute('data-is-allow-submit-form', true);\n    event.target.click();\n}\n\nfunction isActiveCreditCardTab() {\n    return document\n        .querySelector('.payment-options[role=tablist] a[data-toggle=\"tab\"][href=\"#creditcard-content\"]')\n        .classList\n        .contains('active');\n}\n\nfunction makeCreditCardPayment(event) {\n    if (!isActiveCreditCardTab()) {\n        return;\n    }\n\n    if (JSON.parse($continueButton.getAttribute('data-is-allow-submit-form')) && creditCard.isFormValid()) {\n        return;\n    }\n\n    if ($creditCardList) {\n        var is3dSecureEnabled = JSON.parse(document.querySelector('.js_braintree_creditCardFields').getAttribute('data-braintree-config')).is3dSecureEnabled;\n        if ($creditCardList && $creditCardList.value !== 'newcard') {\n            if (!is3dSecureEnabled) {\n                allowSubmitForm(event);\n                return;\n            }\n\n            var selectedCard = braintreeUtils.getSelectedData($creditCardList);\n            var getNonceUrl = $creditCardList.getAttribute('data-get-payment-nonce-url');\n            var cardUUID = selectedCard['data-id'].value;\n            $.get(`${getNonceUrl}?id=${cardUUID}`, function (responce) {\n                creditCard.startTokenize(function (result) {\n                    if (!result.error) {\n                        allowSubmitForm(event);\n                    }\n                }, responce);\n            });\n            event.preventDefault();\n            event.stopPropagation();\n            return;\n        }\n    }\n    creditCard.startTokenize(function (result) {\n        if (!result.error) allowSubmitForm(event);\n    });\n    event.preventDefault();\n    event.stopPropagation();\n}\n\nmodule.exports = {\n    doNotAllowSubmitForm,\n    hide3DSecureContainer,\n    makeCreditCardPayment\n};\n","'use strict';\n\nvar googlepay = require('../braintreeGooglepay');\nvar loaderInstance = require('../loaderHelper');\n\nfunction submitAddGooglePayAccountForm() {\n    $('.js_braintree_addGooglePayAccountForm').submit(function () {\n        var $form = $(this);\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        $form.spinner().start();\n\n        $.post($form.attr('action'), $form.serialize())\n            .done(function (data) {\n                $form.spinner().stop();\n                if (!data.success) {\n                    $btFormErrorContainer.textContent = data.error;\n                } else {\n                    location.href = data.redirectUrl;\n                }\n            })\n            .fail(function (err) {\n                if (err.responseJSON.redirectUrl) {\n                    window.location.href = err.responseJSON.redirectUrl;\n                }\n                $form.spinner().stop();\n            });\n        return false;\n    });\n}\n\nfunction initAddGooglePayAccount() {\n    var $btn = document.querySelector('.js_braintree_accountgooglepay_button');\n    var $googlepayNonce = document.querySelector('#braintreeGooglePayNonce');\n    var $btGooglePayLoader = document.querySelector('.braintreeGooglepayLoader');\n    var googlepayIns;\n    var loader = loaderInstance($btGooglePayLoader);\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n    loader.show();\n\n    config.onTokenizePayment = function (data, result) {\n        var $btFormErrorContainer = document.querySelector('#braintreeFormErrorContainer');\n        $btFormErrorContainer.textContent = '';\n\n        if (result.type === 'PayPalAccount') {\n            $btFormErrorContainer.textContent = config.messages.saving_paypal_account_error;\n\n            return;\n        }\n\n        $googlepayNonce.value = result.nonce;\n\n        document.querySelector('.braintreeGooglePayBtn').click();\n    };\n    googlepayIns = googlepay.init(config, $btn);\n    googlepayIns.createGooglepay();\n    $btn.setAttribute('data-is-inited', true);\n    submitAddGooglePayAccountForm();\n}\n\nmodule.exports = {\n    initAddGooglePayAccount\n};\n/* eslint no-use-before-define: 2 */  // --> ON\n","'use strict';\nvar helper = require('../helper');\n\nvar $googlepayContent = document.querySelector('.js_braintree_googlepayContent');\nvar $btGooglepayAccountsList = document.querySelector('#braintreeGooglepayAccountsList');\nvar $googlepayButton = document.querySelector('.js_braintree_googlepay_button');\n\nfunction showGooglepayAccount() {\n    var $sessionAccount = document.querySelector('#sessionGPAccount');\n    $sessionAccount.classList.remove('used-googlepay-account-hide');\n    $sessionAccount.classList.add('used-googlepay-account');\n\n    var $gpAccount = document.querySelector('.form-group.braintree_used_googlepay_account');\n    $gpAccount.classList.remove('used-googlepay-account-hide');\n    $gpAccount.classList.add('used-googlepay-account');\n\n    $googlepayButton.style.display = 'none';\n    $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($btGooglepayAccountsList.value === 'newaccount') {\n        $googlepayButton.style.display = 'block';\n        helper.continueButtonToggle(true);\n        $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', true);\n    } else {\n        $googlepayButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $googlepayContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    }\n}\n\nfunction createGooglepayBillingAddressData(data) {\n    var billingData = data.paymentMethodData.info.billingAddress;\n    var billingAddress = {};\n    billingAddress.recipientName = billingData.name;\n    billingAddress.phone = billingData.phoneNumber;\n    billingAddress.countryCodeAlpha2 = billingData.countryCode;\n    billingAddress.streetAddress = billingData.address1;\n    billingAddress.extendedAddress = billingData.address2;\n    billingAddress.locality = billingData.locality;\n    billingAddress.region = billingData.administrativeArea;\n    billingAddress.postalCode = billingData.postalCode;\n    billingAddress.email = data.email;\n    return JSON.stringify(billingAddress);\n}\n\nfunction createGooglepayShippingAddressData(shippingData) {\n    var shippingAddress = {};\n    shippingAddress.recipientName = shippingData.name;\n    shippingAddress.phone = shippingData.phoneNumber;\n    shippingAddress.countryCodeAlpha2 = shippingData.countryCode;\n    shippingAddress.streetAddress = shippingData.address1;\n    shippingAddress.extendedAddress = shippingData.address2;\n    shippingAddress.locality = shippingData.locality;\n    shippingAddress.region = shippingData.administrativeArea;\n    shippingAddress.postalCode = shippingData.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\n/*\n    Remove method was used and change appearance of paypal tab\n**/\nfunction removeSessionAccount() {\n    var $gpAccount = document.querySelector('.form-group.braintree_used_googlepay_account');\n    $gpAccount.classList.remove('used-googlepay-account');\n    $gpAccount.classList.add('used-googlepay-account-hide');\n\n    var $sessionAccount = document.querySelector('#sessionGPAccount');\n    $sessionAccount.classList.add('used-googlepay-account-hide');\n    $sessionAccount.classList.remove('used-googlepay-account');\n    $sessionAccount.value = '';\n    $sessionAccount.text = '';\n    $sessionAccount.setAttribute('data-session-account', false);\n\n    document.querySelector('#braintreeGooglePayNonce').value = '';\n    document.querySelector('#braintreeGooglePayBillingAddress').value = '';\n    document.querySelector('#braintreeGooglepayPaymentType').value = '';\n\n    document.querySelector('#newGPAccount').selected = true;\n    hideShowButtons();\n}\n\nmodule.exports = {\n    showGooglepayAccount,\n    hideShowButtons,\n    createGooglepayBillingAddressData,\n    createGooglepayShippingAddressData,\n    removeSessionAccount\n};\n","'use strict';\nvar googlepay = require('../braintreeGooglepay');\nvar googlepayHelper = require('./googlepayHelper');\n\nvar $googlepayButton = document.querySelector('.js_braintree_googlepay_button');\nvar $btGooglepayAccountsList = document.querySelector('#braintreeGooglepayAccountsList');\nvar $googlepayOnCart = document.querySelector('.braintree-cart-google-button');\nvar $googlepayNonce = document.querySelector('#braintreeGooglePayNonce');\nvar $googlepayCardDescription = document.querySelector('#braintreeGooglePayCardDescription');\nvar $braintreeGooglepayBillingAddressInput = document.querySelector('input[name=braintreeGooglePayBillingAddress]');\nvar $braintreeGooglepayPaymentType = document.querySelector('#braintreeGooglepayPaymentType');\n\nfunction makeGooglepayPayment(continueButton) {\n    var googlepayIns;\n    var config = JSON.parse($googlepayButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($googlepayButton, 'not valid data-braintree-config');\n    }\n\n    if ($btGooglepayAccountsList) {\n        $btGooglepayAccountsList.addEventListener('change', function () {\n            googlepayHelper.hideShowButtons();\n        });\n        googlepayHelper.hideShowButtons();\n\n        if ($googlepayCardDescription.value === 'GooglePay') {\n            $googlepayCardDescription.value = $btGooglepayAccountsList.selectedOptions[0].label;\n        }\n    }\n\n    config.onTokenizePayment = function (data, result) {\n        var billingAddressData;\n        var shippingAddressData;\n        var newPPAccount = document.getElementById('newGPAccount');\n        if (require('../helper').isNonceExist('Paypal')) {\n            require('../paypal/paypalHelper').updatePayPalAppearance();\n        }\n\n        if (data) {\n            billingAddressData = googlepayHelper.createGooglepayBillingAddressData(data);\n\n            if ($googlepayOnCart) {\n                shippingAddressData = googlepayHelper.createGooglepayShippingAddressData(data.shippingAddress);\n\n                $.ajax({\n                    url: config.returnFromCartUrl,\n                    type: 'POST',\n                    contentType: 'application/json',\n                    data: JSON.stringify({\n                        nonce: result.nonce,\n                        paymentCardDescription: result.details.cardType + ' ' + result.details.lastFour,\n                        saveGpAccount: result.type === 'AndroidPayCard',\n                        billingAddress: billingAddressData,\n                        shippingAddress: shippingAddressData || {},\n                        paymentType: result.type\n                    }),\n                    success: function (res) {\n                        sessionStorage.setItem('pageState', 'cart');\n                        googlepayIns.loader.hide();\n                        window.location.href = res.redirectUrl;\n                    },\n                    error: function () {\n                        googlepayIns.loader.hide();\n                    }\n                });\n                return;\n            }\n\n            $braintreeGooglepayBillingAddressInput.value = billingAddressData;\n        }\n\n        $googlepayNonce.value = result.nonce;\n        $googlepayCardDescription.value = result.details.cardType + ' ' + result.details.lastFour;\n        $braintreeGooglepayPaymentType.value = result.type;\n\n        // Selecting Google Pay Session Account\n        document.querySelector('#sessionGPAccount').text = $googlepayCardDescription.value;\n        newPPAccount.removeAttribute('selected');\n        document.querySelector('#sessionGPAccount').selected = true;\n        document.querySelector('#sessionGPAccount').setAttribute('data-session-account', 'true');\n\n        googlepayHelper.showGooglepayAccount();\n        continueButton.click();\n    };\n\n    googlepayIns = googlepay.init(config, $googlepayButton);\n    googlepayIns.createGooglepay();\n\n    function googlepayUpdateAmount() { // eslint-disable-line require-jsdoc\n        googlepayIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                googlepayIns.loader.hide();\n                googlepayIns.updateAmount(data.amount);\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', googlepayUpdateAmount);\n    $('body').on('braintree:updateCartTotals', googlepayUpdateAmount);\n    googlepayUpdateAmount();\n}\n\nmodule.exports = {\n    makeGooglepayPayment\n};\n","'use strict';\nvar $continueButton = document.querySelector('button.submit-payment');\n\nfunction initWathcherCartUpdate() {\n    var $grantTotal = document.querySelector('.grand-total');\n    if ($grantTotal) {\n        var currentGrantTotalValue = $grantTotal.textContent;\n        $('body').on('cart:update', function () {\n            var newGrantTotalValue = $grantTotal.textContent;\n            if (newGrantTotalValue !== '' && newGrantTotalValue !== currentGrantTotalValue) {\n                currentGrantTotalValue = newGrantTotalValue;\n                var updateCartTotals = document.createEvent('Event');\n                updateCartTotals.initEvent('updateCartTotals', true, true);\n                document.querySelector('body').addEventListener('updateCartTotals', function () {\n                    'braintree:updateCartTotals';\n                }, false);\n                document.querySelector('body').dispatchEvent(updateCartTotals);\n            }\n        });\n    }\n}\n\nfunction continueButtonToggle(flag) {\n    var stage = window.location.hash.substring(1);\n    if (stage === 'placeOrder' || stage === 'shipping' || stage === null || stage === '') {\n        return;\n    }\n    if (flag) {\n        $continueButton.style.display = 'none';\n    } else {\n        $continueButton.style.display = '';\n    }\n}\n\n\nfunction paymentMethodChangeHandle(currentTab) {\n    document.querySelectorAll('.payment-options[role=tablist] a[data-toggle=\"tab\"]').forEach(function (el) {\n        var $tabContent = document.querySelector(el.getAttribute('href'));\n\n        if (el === currentTab) {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.removeAttribute('disabled', 'disabled');\n            });\n            $tabContent.querySelectorAll('select.no-disable').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n            continueButtonToggle(JSON.parse($tabContent.getAttribute('data-paypal-is-hide-continue-button')));\n        } else {\n            $tabContent.querySelectorAll('input, textarea, select').forEach(function (tab) {\n                tab.setAttribute('disabled', 'disabled');\n            });\n        }\n    });\n}\n\nfunction getPaymentMethodToLowerCase(paymentMethodName) {\n    var paymentMethod = paymentMethodName.split('_');\n    if (paymentMethod.length === 1) {\n        return paymentMethodName;\n    }\n    paymentMethod.forEach(function (element, index) {\n        paymentMethod[index] = element.charAt(0) + element.slice(1).toLocaleLowerCase();\n    });\n    return paymentMethod[1] ?\n        paymentMethod[0] + ' ' + paymentMethod[1] :\n        paymentMethod[0];\n}\n\nfunction updateCheckoutView(e, data) {\n    var $paymentSummary = document.querySelector('.summary-details .braintree-payment-details');\n    var htmlToAppend = '';\n    var order = data.order;\n\n    if (order.billing.payment && order.billing.payment.selectedPaymentInstruments\n        && order.billing.payment.selectedPaymentInstruments.length > 0) {\n        htmlToAppend += '<div>' + getPaymentMethodToLowerCase(order.billing.payment.selectedPaymentInstruments[0].paymentMethod) + '</div>';\n        if (order.billing.payment.selectedPaymentInstruments[0].creditCardNumber) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].creditCardNumber + '</div>';\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].paymentMethod === 'GooglePay') {\n            let gpCardDescription = document.querySelector('#braintreeGooglePayCardDescription');\n            if (gpCardDescription && gpCardDescription.value) {\n                let gpCardDescriptionData = gpCardDescription.value.split(' ');\n                htmlToAppend += '<div>' + gpCardDescriptionData[0] + '....' + gpCardDescriptionData[1] + '</div>';\n            }\n        }\n        if (order.billing.payment.selectedPaymentInstruments[0].type) {\n            htmlToAppend += '<div>' + order.billing.payment.selectedPaymentInstruments[0].type + '</div>';\n        }\n        htmlToAppend += '<div>' + order.priceTotal.charAt(0) + order.billing.payment.selectedPaymentInstruments[0].amount + '</div>';\n    }\n\n    if ($paymentSummary) {\n        $paymentSummary.innerHTML = htmlToAppend;\n    }\n}\n\nfunction isValidInputField(field) {\n    if (!field.checkValidity()) {\n        if (!field.classList.contains('is-invalid')) {\n            field.classList.add('is-invalid');\n        }\n        return false;\n    }\n    if (field.checkValidity() && field.classList.contains('is-invalid')) {\n        field.classList.remove('is-invalid');\n    }\n    return true;\n}\n/*\n    Adding *active* line to the tab-content class in a case if it isn't already active\n    Use case: customer checkout from cart (page) and\n    (under the place Order page) hit the 'edit' button\n**/\nfunction updatePaymentMethodTab() {\n    let paymentMethodName = document.querySelectorAll('[data-braintree-payment-method]')[0].dataset.braintreePaymentMethod;\n    let content = document.querySelector(`.js_braintree_${paymentMethodName.toLowerCase()}Content`).classList.contains('active');\n    if (!content) {\n        document.querySelectorAll(`[data-method-id=${paymentMethodName}]`)[0].children[0].click();\n    }\n}\n\n/**\n * Gets Billing Address Form Values\n *\n * @returns {Object} with Billing Address\n */\nfunction getBillingAddressFormValues() {\n    return $('#dwfrm_billing').serialize().split('&')\n        .map(function (el) {\n            return el.split('=');\n        })\n        .reduce(function (accumulator, item) {\n            var elem = item[0].lastIndexOf('_');\n            if (elem < 0) {\n                accumulator[item[0]] = item[1];\n            } else {\n                elem = item[0].substring(elem + 1);\n                accumulator[elem] = item[1];\n            }\n            return accumulator;\n        }, {});\n}\n/**\n * Gets Nonce depending on payment method name\n *\n * @param {string} paymentMethodName - payment method name\n * @returns {boolean} nonce exist\n */\n\nfunction isNonceExist(paymentMethodName) {\n    var $nonce = document.querySelector(`#braintree${paymentMethodName}Nonce`);\n    if (!$nonce) return false;\n    var nonceValue = $nonce.value;\n    var $tab = document.querySelector(`.${paymentMethodName.toLowerCase()}-tab`);\n    var isActiveTab;\n    if ($tab) {\n        isActiveTab = $tab.classList.contains('active');\n    }\n    return !isActiveTab && nonceValue;\n}\n\nvar loaderInstance = require('./loaderHelper');\nvar accountsLoader;\nfunction removeBtPayment(e) {\n    let target = e.target;\n    var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n    accountsLoader = loaderInstance($loaderContainter);\n    accountsLoader.show();\n\n    $.get(target.getAttribute('data-url') + '?UUID=' + target.getAttribute('data-id'))\n        .then((data => {\n            $('#uuid-' + data.UUID).remove();\n            if (data.newDefaultPaypalAccount) {\n                $('#uuid-' + data.newDefaultPaypalAccount + ' .card-info-group p:first').append('<span><b>(default)</b></span>');\n            }\n            if (data.newDefaultCreditCard) {\n                document.querySelector('#uuid-' + data.newDefaultCreditCard + ' span').style.fontWeight = 'bold';\n                document.querySelector('#uuid-' + data.newDefaultCreditCard + ' button.braintree-make-default-card').style.display = 'none';\n            }\n            accountsLoader.hide();\n        }))\n        .fail(() => {\n            location.reload();\n            accountsLoader.hide();\n        });\n}\n\n/**\n * Create formData from fields data\n *\n * @param {Object} paymentFields - fields data values\n * @param {Object} fieldsData - fields data values\n * @returns {Object} cart billing form data\n */\nfunction createPaymentFormData(paymentFields, fieldsData) {\n    var paymentFieldsParsed = JSON.parse(paymentFields);\n\n    return Object.entries(paymentFieldsParsed).reduce(function (formData, entry) {\n        const [key, field] = entry;\n        if (typeof field === 'object') {\n            formData.append(field.name, fieldsData && fieldsData[key] !== null ? fieldsData[key] : field.value);\n        }\n        return formData;\n    }, new FormData());\n}\n\nfunction initCardEvents() {\n    if (document.querySelector('.braintreeAddNewCard')) {\n        document.querySelector('.braintreeAddNewCard').addEventListener('click', function () {\n            document.querySelector('.braintreeAddNewCard').style.display = 'none';\n            document.querySelector('.braintreeAddNewCardBlock').style.display = 'block';\n        });\n    }\n    document.querySelector('.creditCard-accounts').onclick = function (e) {\n        if (e.target.classList.contains('remove-bt-payment')) {\n            removeBtPayment(e);\n        } else if (e.target.classList.contains('braintree-make-default-card')) {\n            var target = e.target;\n            var url = target.getAttribute('data-make-default-url');\n            var id = target.getAttribute('data-id');\n            var $loaderContainter = document.querySelector('#' + target.getAttribute('data-loader'));\n            var loader = loaderInstance($loaderContainter);\n            loader.show();\n\n            $.get(url + '?UUID=' + id)\n                .then((data) => {\n                    loader.hide();\n                    if (data.newDefaultCreditCard) {\n                        document.querySelector('#uuid-' + data.newDefaultCreditCard + ' span').style.fontWeight = 'bold';\n                        document.querySelector('.braintree-make-default-card.uuid-' + data.newDefaultCreditCard).style.display = 'none';\n                    }\n                    if (data.cardToRemoveDefaultProperty) {\n                        document.querySelector('#uuid-' + data.cardToRemoveDefaultProperty + ' span').style.fontWeight = 'normal';\n                        document.querySelector('.braintree-make-default-card.uuid-' + data.cardToRemoveDefaultProperty).style.display = 'inline';\n                    }\n                })\n                .fail(() => {\n                    loader.hide();\n                });\n        }\n    };\n}\nmodule.exports = {\n    initWathcherCartUpdate,\n    paymentMethodChangeHandle,\n    continueButtonToggle,\n    updateCheckoutView,\n    isValidInputField,\n    updatePaymentMethodTab,\n    getBillingAddressFormValues,\n    removeBtPayment,\n    createPaymentFormData,\n    initCardEvents,\n    isNonceExist\n};\n","\nmodule.exports = function (containerElement) {\n    if (!containerElement) {\n        // eslint-disable-next-line no-console\n        console.error('Braintree: No container for showing loaders');\n    }\n    function Constructor() {\n        this.containerEl = containerElement;\n    }\n    Constructor.prototype.show = function () {\n        this.containerEl.style.display = 'block';\n    };\n    Constructor.prototype.hide = function () {\n        this.containerEl.style.display = 'none';\n    };\n    return new Constructor();\n};\n","'use strict';\nvar braintreeLocal = require('../braintreeLocal');\nvar $lpmButton = document.querySelectorAll('.lpmButton');\n\n$lpmButton.forEach(function (el) {\n    var $btn = el;\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n    var localIns = braintreeLocal.init(config, $btn);\n    localIns.createLocalPayment();\n});\n","'use strict';\n\nvar paypalHelper = require('./paypalHelper');\nvar payPal = require('../braintreePaypal');\nvar braintreeUtils = require('../braintreeUtils');\nvar paypalSavedAccountHandler = require('./paypalSavedAccountHandler');\n\nvar $paypalMinicartButton;\n\nfunction miniCartButton() {\n    document.querySelectorAll('.js_braintree_paypal_cart_button').forEach(function (el) {\n        var $btn = el;\n        if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n            return;\n        }\n        var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n        if (typeof config !== 'object' || config === null) {\n            // eslint-disable-next-line no-console\n            console.error(el, 'not valid data-braintree-config');\n            return;\n        }\n        $paypalMinicartButton = document.querySelector('.paypalMinicartButton');\n        if ($paypalMinicartButton && config.options.amount === 0) {\n            $paypalMinicartButton.style.display = 'none';\n        }\n        config.paypalConfig = config.paypalConfig || {};\n\n        config.onTokenizePayment = function (payload, btnInstance) {\n            var that = btnInstance;\n            var params = btnInstance.params;\n            var postData = {\n                braintreePaypalNonce: payload.nonce\n            };\n\n            if (params.riskData) {\n                postData.braintreePaypalRiskData = params.riskData;\n            }\n\n            if (payload.details) {\n                var details = payload.details;\n                if (!details.billingAddress) {\n                    that.er.show('Merchant PayPal account does not support the Billing Address retrieving. Contact PayPal for details on eligibility and enabling this feature.');\n\n                    return;\n                }\n                var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                postData.braintreePaypalBillingAddress = billingAddressData;\n                var shippingAddressData = details.shippingAddress ? paypalHelper.createShippingAddressData(details.shippingAddress, details) : '{}';\n                postData.braintreePaypalShippingAddress = shippingAddressData;\n            }\n\n            if (params.options.flow === 'vault' || (params.options.flow === 'checkout' && params.options.requestBillingAgreement)) {\n                postData.braintreeSavePaypalAccount = 'true';\n                postData.braintreePaypalAccountMakeDefault = 'true';\n            }\n\n            braintreeUtils.postData(params.paypalHandle, postData);\n        };\n\n        var paypalIns = payPal.init(config, $btn);\n\n        function updateCartPaypalAmount() { // eslint-disable-line require-jsdoc\n            paypalIns.loader.show();\n            $.ajax({\n                url: config.getOrderInfoUrl,\n                type: 'get',\n                dataType: 'json',\n                success: function (data) {\n                    paypalIns.loader.hide();\n                    paypalIns.updateAmount(data.amount);\n                },\n                error: function () {\n                    window.location.reload();\n                }\n            });\n        }\n        $('body').on('cart:update', function () {\n            $paypalMinicartButton = document.querySelector('.paypalMinicartButton');\n            var $totalPrice = document.querySelector('.sub-total');\n            if ($paypalMinicartButton && $totalPrice) {\n                var isZeroAmount = $totalPrice.innerHTML.substring(1) === '0.00';\n                $paypalMinicartButton.style.display = isZeroAmount ? 'none' : '';\n            }\n        });\n\n        $('body').on('braintree:updateCartTotals', updateCartPaypalAmount);\n        $btn.setAttribute('data-is-inited', true);\n    });\n}\n\nvar observer = new MutationObserver(function (mutations) {\n    mutations.forEach(function (mutation) {\n        if (mutation.addedNodes.length < 2) {\n            return;\n        }\n        miniCartButton();\n        var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n        if ($staticPaypalButton) {\n            $staticPaypalButton.addEventListener('click', paypalSavedAccountHandler.staticImageHandler);\n        }\n    });\n});\n\nmodule.exports = {\n    miniCartButton,\n    observer\n};\n","'use strict';\nvar payPal = require('../braintreePaypal');\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar loaderInstance = require('../loaderHelper');\nvar accountsLoader;\n\nfunction initAddPaypalAccount() {\n    var $btn = document.querySelector('.js_braintree_accountPaypalButton');\n    var $paypalErrorContainer = document.querySelector('#paypalAccountErrorContainer');\n    var $paypalLoader = document.querySelector('#braintreePayPalAccLoader');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n\n    config.$loaderContainer = $paypalLoader;\n    config.$errorContainer = $paypalErrorContainer;\n    config.onTokenizePayment = function (data) {\n        let accountPaypalButton = document.querySelector('.js_braintree_accountPaypalButton');\n        let paypalAddAccountHandler = accountPaypalButton.getAttribute('data-paypal-add-account-handler');\n        let paypalAccountFormFields = accountPaypalButton.getAttribute('data-paypal-account-form-fields');\n        let paypalAccountFormData = helper.createPaymentFormData(paypalAccountFormFields, {\n            nonce: data.nonce,\n            email: data.details.email,\n            makedefault: document.querySelector('#makeDefaultPaypalAccount').checked\n        });\n        let csrfToken = document.querySelector('.js_braintree_accountPaypalButton_wrapper #csrf_token');\n        paypalAccountFormData.append(csrfToken.name, csrfToken.value);\n\n        let $loaderContainter = document.querySelector('#paypalAccountBtLoader');\n        accountsLoader = loaderInstance($loaderContainter);\n        accountsLoader.show();\n        return $.ajax({\n            type: 'POST',\n            url: paypalAddAccountHandler,\n            data: paypalAccountFormData,\n            contentType: false,\n            processData: false\n        })\n            .then((paymentData) => {\n                paypalHelper.hidePaypalAccountBtn();\n                $paypalLoader.style.display = 'none';\n                $paypalErrorContainer.textContent = '';\n                $paypalErrorContainer.style.display = 'none';\n\n                $.get(paymentData.renderAccountsUrl)\n                    .then((tplData => {\n                        accountsLoader.hide();\n                        document.querySelector('.paypal-accounts').innerHTML = tplData;\n                        document.querySelectorAll('.paypal-accounts .remove-bt-payment').forEach(function (el) {\n                            el.addEventListener('click', helper.removeBtPayment);\n                        });\n                    }));\n            })\n            .fail(({ responseJSON }) => {\n                accountsLoader.hide();\n                $paypalLoader.style.display = 'none';\n                $paypalErrorContainer.style.display = 'block';\n                $paypalErrorContainer.textContent = responseJSON.error;\n            });\n    };\n\n    payPal.init(config, $btn);\n    $btn.setAttribute('data-is-inited', true);\n}\n\nfunction initPayPalEvents() {\n    document.querySelector('.add-paypal-account').addEventListener('click', function () {\n        paypalHelper.showPaypalAccountBtn();\n        initAddPaypalAccount();\n    });\n}\n\nmodule.exports = {\n    initPayPalEvents,\n    initAddPaypalAccount\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar $addPaypalAccountBtn = document.querySelector('.add-paypal-account');\nvar $paypalAccountWrapper = document.querySelector('.js_braintree_accountPaypalButton_wrapper');\n\nvar formValidationConrol = function (validateActions) {\n    var isFormValid = true;\n    if (isFormValid) {\n        validateActions.enable();\n    } else {\n        validateActions.disable();\n    }\n};\n\nfunction getSessionAccountOption() {\n    return Array.apply(null, document.querySelector('#braintreePaypalAccountsList').options).find(function (el) {\n        return el.id === 'braintreePaypalAccount' && JSON.parse(el.getAttribute('data-session-account'));\n    });\n}\n\nfunction getOptionByEmail() {\n    var sessionEmail = document.getElementById('braintreePaypalAccount').value || null;\n    return Array.apply(null, document.querySelector('#braintreePaypalAccountsList').options).find(function (el) {\n        return el.getAttribute('data-id') && sessionEmail && sessionEmail === el.text;\n    });\n}\n\nfunction getOptionByDataDefault() {\n    return Array.apply(null, document.querySelector('#braintreePaypalAccountsList').options).find(function (el) {\n        return el.getAttribute('data-default') ? JSON.parse(el.getAttribute('data-default')) : false;\n    });\n}\n\nfunction setSessionAccountOptionDefault() {\n    var savedDefaultOption = getOptionByDataDefault();\n    if (!savedDefaultOption) return;\n\n    savedDefaultOption.selected = '';\n    getSessionAccountOption().selected = 'selected';\n}\n\nfunction initAccountListAndSaveFunctionality() {\n    var $accountsList = document.querySelector('#braintreePaypalAccountsList');\n    var isUserHasSavedAccount = $accountsList.getAttribute('data-customer-has-saved-pp-account');\n    var $savePaypalAccountCountainer = document.querySelector('#braintreeSavePaypalAccountContainer');\n    var $savePaypalAccountCheckbox = document.querySelector('#braintreeSavePaypalAccount');\n    var $paypalAccounMakeDefaultContainer = document.querySelector('#braintreePaypalAccountMakeDefaultContainer');\n    var $paypalAccountMakeDefaultCheckbox = document.querySelector('#braintreePaypalAccountMakeDefault');\n    var $alertInfo = document.getElementById('paypal-content').querySelectorAll('.alert-info')[0];\n\n    function accountsListChange() { // eslint-disable-line require-jsdoc\n        var isSameSessionAccount = getOptionByEmail();\n\n        if (($accountsList.value === 'newaccount')) {\n            $alertInfo.style.display = 'block';\n            if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCountainer.style.display = '';\n                $savePaypalAccountCheckbox.checked = true;\n                $savePaypalAccountCheckbox.disabled = false;\n            }\n            if ($paypalAccounMakeDefaultContainer) {\n                $paypalAccounMakeDefaultContainer.style.display = isUserHasSavedAccount === 'true' ? 'block' : 'none';\n\n                if ($savePaypalAccountCheckbox.checked) {\n                    $paypalAccountMakeDefaultCheckbox.disabled = false;\n                }\n            }\n        } else if ($accountsList.selectedOptions[0].id === 'braintreePaypalAccount') {\n            // Case when Session Email already saved under account\n            if (isSameSessionAccount) {\n                $paypalAccounMakeDefaultContainer.style.display = 'none';\n                $savePaypalAccountCountainer.style.display = 'none';\n                $savePaypalAccountCheckbox.checked = false;\n                $paypalAccountMakeDefaultCheckbox.checked = false;\n            } else if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCountainer.style.display = 'block';\n                $savePaypalAccountCheckbox.checked = true;\n                $savePaypalAccountCheckbox.disabled = false;\n            }\n        } else {\n            $alertInfo.style.display = 'none';\n            var selectedAccount = braintreeUtils.getSelectedData($accountsList);\n            if (selectedAccount && $paypalAccounMakeDefaultContainer) {\n                if (selectedAccount['data-default'].value === 'true') {\n                    $paypalAccounMakeDefaultContainer.style.display = 'none';\n                } else {\n                    $paypalAccounMakeDefaultContainer.style.display = 'block';\n                    $paypalAccountMakeDefaultCheckbox.disabled = false;\n                }\n            }\n            if ($savePaypalAccountCountainer) {\n                $savePaypalAccountCheckbox.checked = false;\n                $savePaypalAccountCountainer.style.display = 'none';\n            }\n        }\n    }\n\n    if ($savePaypalAccountCheckbox) {\n        $savePaypalAccountCheckbox.addEventListener('change', function () {\n            if ($savePaypalAccountCheckbox.checked) {\n                $paypalAccountMakeDefaultCheckbox.disabled = false;\n                if (isUserHasSavedAccount === 'false') {\n                    $paypalAccountMakeDefaultCheckbox.checked = true;\n                }\n            } else {\n                $paypalAccountMakeDefaultCheckbox.disabled = true;\n                $paypalAccountMakeDefaultCheckbox.checked = false;\n            }\n        });\n    }\n    if ($accountsList) {\n        $accountsList.addEventListener('change', accountsListChange);\n        accountsListChange();\n    }\n}\n\nfunction createShippingAddressData(inpShippingAddress, details) {\n    var shippingAddress = inpShippingAddress;\n    if (!shippingAddress.recipientName) {\n        shippingAddress.firstName = details.firstName;\n        shippingAddress.lastName = details.lastName;\n        shippingAddress.recipientName = details.firstName + ' ' + details.lastName;\n    }\n    shippingAddress.email = details.email;\n    shippingAddress.phone = details.phone;\n    shippingAddress.countryCodeAlpha2 = shippingAddress.countryCode;\n    shippingAddress.streetAddress = shippingAddress.line1;\n    shippingAddress.extendedAddress = shippingAddress.line2;\n    shippingAddress.locality = shippingAddress.city;\n    shippingAddress.region = shippingAddress.state;\n    shippingAddress.postalCode = shippingAddress.postalCode;\n    return JSON.stringify(shippingAddress);\n}\n\nfunction createBillingAddressData(inpBillingAddress, details) {\n    var billingAddress = inpBillingAddress;\n    billingAddress.firstName = details.firstName;\n    billingAddress.lastName = details.lastName;\n    billingAddress.email = details.email;\n    billingAddress.phone = details.phone;\n    billingAddress.countryCodeAlpha2 = billingAddress.countryCode;\n    billingAddress.streetAddress = billingAddress.line1;\n    billingAddress.extendedAddress = billingAddress.line2;\n    billingAddress.locality = billingAddress.city;\n    billingAddress.region = billingAddress.state;\n    return JSON.stringify(billingAddress);\n}\n\nfunction appendToUrl(url, param) {\n    var newUrl = url;\n    newUrl += (newUrl.indexOf('?') !== -1 ? '&' : '?') + Object.keys(param).map(function (key) {\n        return key + '=' + encodeURIComponent(param[key]);\n    }).join('&');\n\n    return newUrl;\n}\n\nfunction showPayPalAccount(braintreePaypalEmail, braintreePaypalNonce) {\n    var braintreePaypalAccount = document.getElementById('braintreePaypalAccount');\n    var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n    var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n    var $braintreePaypalAccountsList = document.getElementById('braintreePaypalAccountsList');\n    var customerAuthenticated = JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated);\n\n    if (customerAuthenticated || (braintreePaypalEmail && braintreePaypalAccount.text !== 'PayPal')) {\n        if (braintreePaypalNonce && $braintreePaypalAccountsList) {\n            return true;\n        }\n\n        document.querySelectorAll('.js_braintree_paypalContent .custom-checkbox').forEach((el) => { el.style.display = 'none'; });\n    }\n\n    braintreePaypalAccount.text = braintreePaypalEmail;\n    if (!paypalAccount.classList.contains('used-paypal-account')) {\n        paypalAccount.classList.remove('used-paypal-account-hide');\n        paypalAccount.classList.add('used-paypal-account');\n    }\n\n    document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n    $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n}\n\nfunction showCartErrorMsg(message) {\n    $('.checkout-btn').addClass('disabled');\n    $('.cart-error').append(\n        `<div class=\"alert alert-danger alert-dismissible valid-cart-error fade show cartError\" role=\"alert\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n            ${message}\n        </div>`\n    );\n    window.scrollTo(0, 0);\n}\n\nfunction showCheckoutErrorMsg(message) {\n    document.querySelector('.error-message-text').textContent = '';\n    document.querySelector('.error-message').style.display = 'block';\n    document.querySelector('.error-message-text').append(message);\n    window.scrollTo(0, 0);\n}\n\nfunction showPDPButton($braintreePDPButton) {\n    $braintreePDPButton.style.display = '';\n}\n\nfunction hidePDPButton($braintreePDPButton) {\n    $braintreePDPButton.style.display = 'none';\n}\n\n/*\n    Check if paypal method was used and change appearance of paypal tab\n**/\nfunction updatePayPalAppearance() {\n    var sessionOption = getSessionAccountOption();\n    if (sessionOption) {\n        var $paypalContent = document.querySelector('.js_braintree_paypalContent');\n        document.querySelector('#braintreePaypalNonce').value = '';\n        document.querySelector('#braintreePaypalAccount').selected = false;\n        sessionOption.classList.add('used-paypal-account-hide');\n        sessionOption.classList.remove('used-paypal-account');\n        sessionOption.value = '';\n        sessionOption.text = '';\n        sessionOption.setAttribute('data-session-account', false);\n\n        var defaultOption = getOptionByDataDefault();\n        if (defaultOption) {\n            defaultOption.selected = true;\n            document.querySelector('#braintreePaypalAccountMakeDefaultContainer').style.display = 'none';\n            document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            document.querySelector('.js_braintree_paypal_billing_button').style.display = 'block';\n            var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n            paypalAccount.classList.remove('used-paypal-account');\n            paypalAccount.classList.add('used-paypal-account-hide');\n        }\n\n        [].forEach.call(document.querySelector('#braintreePaypalAccountsList'), function (el) {\n            if (el.style.display === 'none') el.style.display = 'block';\n        });\n    }\n}\n\nfunction showPaypalAccountBtn() {\n    $addPaypalAccountBtn.style.display = 'none';\n    $paypalAccountWrapper.style.display = 'block';\n}\nfunction hidePaypalAccountBtn() {\n    $addPaypalAccountBtn.style.display = 'block';\n    $paypalAccountWrapper.style.display = 'none';\n}\n\nmodule.exports = {\n    formValidationConrol,\n    initAccountListAndSaveFunctionality,\n    createShippingAddressData,\n    createBillingAddressData,\n    appendToUrl,\n    showPayPalAccount,\n    showCartErrorMsg,\n    showCheckoutErrorMsg,\n    showPDPButton,\n    hidePDPButton,\n    getOptionByEmail,\n    getSessionAccountOption,\n    getOptionByDataDefault,\n    updatePayPalAppearance,\n    setSessionAccountOptionDefault,\n    showPaypalAccountBtn,\n    hidePaypalAccountBtn\n};\n","'use strict';\nvar paypalHelper = require('./paypalHelper');\nvar helper = require('../helper');\nvar payPal = require('../braintreePaypal');\nvar googlePayHelper = require('../googlepay/googlepayHelper');\n\nvar $paypalContent = document.querySelector('.js_braintree_paypalContent');\nvar $paypalButton = document.querySelector('.js_braintree_paypal_billing_button');\nvar $braintreePaypalAccountsList = document.querySelector('#braintreePaypalAccountsList');\nvar $braintreePaypalBillingAddressInput = document.querySelector('input[name=braintreePaypalBillingAddress]');\nvar $braintreePaypalShippingAddressInput = document.querySelector('input[name=braintreePaypalShippingAddress]');\nvar $braintreePaypalNonceInput = document.querySelector('input[name=braintreePaypalNonce]');\nvar $braintreePaypalEmail = document.querySelector('#braintreePaypalEmail');\nvar $braintreePaypalNonce = document.querySelector('#braintreePaypalNonce');\n\nfunction makePaypalPayment(continueButton) {\n    var config = JSON.parse($paypalButton.getAttribute('data-braintree-config'));\n    var isSessionAccount = paypalHelper.getSessionAccountOption();\n    var isSameSessionAccount = paypalHelper.getOptionByEmail();\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($paypalButton, 'not valid data-braintree-config');\n    }\n\n    function hideShowButtons() {\n        if ($braintreePaypalAccountsList.value === 'newaccount') {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', true);\n            continueButton.style.display = 'none';\n            $paypalButton.style.display = '';\n        } else {\n            $paypalContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            continueButton.style.display = '';\n            $paypalButton.style.display = 'none';\n        }\n    }\n\n    if ($braintreePaypalAccountsList) {\n        $braintreePaypalAccountsList.addEventListener('change', function () {\n            hideShowButtons();\n        });\n    }\n\n    // Getting same email option as session email, if any found\n    if (JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated) && isSessionAccount) {\n        if (isSameSessionAccount) {\n            isSameSessionAccount.style.display = 'none';\n            if (isSessionAccount.classList.contains('used-paypal-account-hide')) {\n                isSessionAccount.classList.add('used-paypal-account');\n                isSessionAccount.classList.remove('used-paypal-account-hide');\n            }\n        }\n\n        paypalHelper.setSessionAccountOptionDefault();\n    }\n\n    paypalHelper.initAccountListAndSaveFunctionality();\n\n    config.onTokenizePayment = function (data) {\n        if (helper.isNonceExist('GooglePay')) {\n            googlePayHelper.removeSessionAccount();\n        }\n        if ($braintreePaypalNonceInput) {\n            $braintreePaypalNonceInput.value = data.nonce;\n        }\n        $braintreePaypalNonce.value = data.nonce;\n        document.querySelector('#braintreePaypalAccount').setAttribute('data-session-account', 'true');\n\n        if (data.details) {\n            var details = data.details;\n            $braintreePaypalEmail.value = data.details.email;\n            document.querySelector('#braintreePaypalAccount').value = data.details.email;\n            document.querySelector('#braintreePaypalAccount').text = data.details.email;\n            helper.continueButtonToggle(false);\n\n            if (details.billingAddress) {\n                var billingAddressData = paypalHelper.createBillingAddressData(details.billingAddress, details);\n                if ($braintreePaypalBillingAddressInput) {\n                    $braintreePaypalBillingAddressInput.value = billingAddressData;\n                }\n            }\n            if (details.shippingAddress) {\n                var shippingAddressData = paypalHelper.createShippingAddressData(details.shippingAddress, details);\n                if ($braintreePaypalShippingAddressInput) {\n                    $braintreePaypalShippingAddressInput.value = shippingAddressData;\n                }\n            }\n            if ($braintreePaypalAccountsList && $braintreePaypalAccountsList.value === 'newaccount') {\n                document.querySelector('.js_braintree_paypal_billing_button').style.display = 'none';\n                var paypalAccount = document.querySelector('.form-group.braintree_used_paypal_account');\n                var sessionAccount = document.querySelector('#braintreePaypalAccount');\n                if (!paypalAccount.classList.contains('used-paypal-account')) {\n                    paypalAccount.classList.remove('used-paypal-account-hide');\n                    paypalAccount.classList.add('used-paypal-account');\n                    sessionAccount.classList.remove('used-paypal-account-hide');\n                    sessionAccount.classList.add('used-paypal-account');\n                } else {\n                    sessionAccount.classList.remove('used-paypal-account-hide');\n                    sessionAccount.classList.add('used-paypal-account');\n                }\n            }\n        }\n\n        var newPPAccount = document.getElementById('newPPAccount');\n        if (newPPAccount.selected) {\n            newPPAccount.removeAttribute('selected');\n            document.querySelector('#braintreePaypalAccount').selected = true;\n        }\n\n        // Getting same email option as session email, if any found\n        if (JSON.parse($braintreePaypalAccountsList.dataset.customerAuthenticated) && paypalHelper.getSessionAccountOption()) {\n            isSameSessionAccount = paypalHelper.getOptionByEmail();\n            paypalHelper.setSessionAccountOptionDefault();\n\n            if (isSameSessionAccount) {\n                isSameSessionAccount.style.display = 'none';\n                document.getElementById('braintreeSavePaypalAccount').value = false;\n                document.getElementById('braintreePaypalAccountMakeDefault').value = false;\n                document.querySelector('#braintreePaypalAccountMakeDefaultContainer').style.display = 'none';\n                document.querySelector('#braintreeSavePaypalAccountContainer').style.display = 'none';\n            } else {\n                [].forEach.call(document.querySelector('#braintreePaypalAccountsList'), function (el) {\n                    if (el.style.display === 'none') el.style.display = 'block';\n                });\n            }\n        }\n\n        paypalHelper.showPayPalAccount(data.details.email, data.nonce);\n        continueButton.click();\n    };\n\n    config.paypalConfig = config.paypalConfig || {};\n    config.paypalConfig.validate = function (validateActions) {\n        paypalHelper.formValidationConrol(validateActions, true);\n    };\n\n    var paypalIns = payPal.init(config, $paypalButton);\n    if (document.querySelector('.braintree_used_paypal_account').classList.contains('used-paypal-account')) {\n        paypalHelper.showPayPalAccount(document.querySelector('#braintreePaypalEmail').value);\n    }\n    function updateAmountAndShippingData() { // eslint-disable-line require-jsdoc\n        paypalIns.loader.show();\n        $.ajax({\n            url: config.getOrderInfoUrl,\n            type: 'get',\n            dataType: 'json',\n            success: function (data) {\n                var $paypalAddress = document.querySelector('input[name=braintreePaypalShippingAddress]') !== '';\n                paypalIns.loader.hide();\n                paypalIns.updateAmount(data.amount);\n                paypalIns.updateShippingAddress(data.shippingAddress);\n                if ($paypalAddress.value) {\n                    var newPayPalAddress = $.extend({}, JSON.parse($paypalAddress.value), data.shippingAddress);\n                    $paypalAddress.value = JSON.stringify(newPayPalAddress);\n                }\n            },\n            error: function () {\n                window.location.reload();\n            }\n        });\n    }\n\n    $('body').on('checkout:updateCheckoutView', updateAmountAndShippingData);\n    updateAmountAndShippingData();\n}\n\nmodule.exports = {\n    makePaypalPayment\n};\n","'use strict';\n\nvar braintreeUtils = require('../braintreeUtils');\nvar loaderInstance = require('../loaderHelper');\nvar { showPDPButton, hidePDPButton } = require('./paypalHelper');\n\nvar $braintreePDPButton = document.querySelector('.braintree_pdp_button');\n\nfunction staticImageHandler() {\n    var $loaderContainter = document.querySelector('.braintreePayPalLoader');\n    var loader = loaderInstance($loaderContainter);\n    var $staticPaypalButton = document.querySelector('.braintree-static-paypal-button');\n    var checkoutFromCartUrl = $staticPaypalButton.getAttribute('data-checkout-from-cart-url');\n    loader.show();\n    if ($braintreePDPButton && $braintreePDPButton.style.display === '') {\n        var res = braintreeUtils.pdpOnlickForAsignedPaypalPayment();\n        if (res.error) {\n            loader.hide();\n            // eslint-disable-next-line no-unused-expressions\n            window.location.reload;\n            return;\n        }\n    }\n\n    return $.ajax({\n        url: checkoutFromCartUrl,\n        type: 'POST',\n        success: function (data) {\n            loader.hide();\n            sessionStorage.setItem('pageState', 'cart');\n            window.location.href = data.redirectUrl;\n        },\n        error: function () {\n            loader.hide();\n        }\n    });\n}\n\nfunction paypalStaticPdpButtonHandler() {\n    if ($braintreePDPButton) {\n        var $price = document.querySelector('.price .sales .value');\n        var isZeroAmount = false;\n        var $miniCartQuantity = document.querySelector('.minicart-quantity');\n        var $addToCartButton = document.querySelector('.add-to-cart') || document.querySelector('.add-to-cart-global');\n\n        // Check minicart quantity and hide PDPbutton if it is not empty\n        if (($miniCartQuantity && parseInt($miniCartQuantity.textContent, 0) > 0)\n            || ($price && $price.getAttribute('content') === '0.00')) {  // Check if product price is zero\n            hidePDPButton($braintreePDPButton);\n        }\n\n        if ($addToCartButton.disabled) {\n            hidePDPButton($braintreePDPButton);\n        }\n\n        $('body').on('product:afterAddToCart', function () {\n            hidePDPButton($braintreePDPButton);\n        });\n\n        $('body').on('cart:update', function () {\n            $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n            if ($addToCartButton.disabled) {\n                hidePDPButton($braintreePDPButton);\n            }\n            if ($miniCartQuantity === 0 && !$addToCartButton.disabled) {\n                showPDPButton($braintreePDPButton);\n            }\n        });\n\n        $('body').on('product:statusUpdate', function () {\n            $miniCartQuantity = parseInt(document.querySelector('.minicart-quantity').textContent, 0);\n            $price = document.querySelector('.price .sales .value');\n            isZeroAmount = false;\n            if ($price) {\n                isZeroAmount = $price.getAttribute('content') === '0.00';\n            }\n\n            if ($miniCartQuantity === 0) {\n                if ($addToCartButton.disabled || isZeroAmount) {\n                    hidePDPButton($braintreePDPButton);\n                }\n                if (!$addToCartButton.disabled && !isZeroAmount) {\n                    showPDPButton($braintreePDPButton);\n                }\n            }\n        });\n    }\n}\n\nmodule.exports = {\n    staticImageHandler,\n    paypalStaticPdpButtonHandler\n};\n","var $srcContent = document.querySelector('.js_braintree_srcContent');\nvar $srcSessionAccount = document.querySelector('#sessionSrcAccount');\nvar $srcAccountList = document.querySelector('#braintreeSrcAccountsList');\nvar $srcButton = document.querySelector('.js_braintree_src_button');\nvar $accoutnListBlock = document.querySelector('.braintree_used_src_account');\nvar helper = require('../helper');\n\nfunction srcUpdateAmount(srcIns, config) { // eslint-disable-line require-jsdoc\n    srcIns.loader.show();\n    $.ajax({\n        url: config.getOrderInfoUrl,\n        type: 'get',\n        dataType: 'json',\n        success: function (data) {\n            srcIns.loader.hide();\n            srcIns.updateAmount(data.amount);\n        },\n        error: function () {\n            window.location.reload();\n        }\n    });\n}\n\nfunction setSessionAccountData(cardDescrition) {\n    $srcSessionAccount.value = cardDescrition;\n    $srcSessionAccount.text = cardDescrition;\n    $srcSessionAccount.selected = true;\n    $accoutnListBlock.style.display = 'block';\n    $srcAccountList.dispatchEvent(new Event('change'));\n}\n\nfunction updateSessionAccountDropdown() {\n    if ($srcAccountList.value === 'newaccount') {\n        $srcButton.style.display = 'block';\n        helper.continueButtonToggle(true);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', true);\n    } else {\n        $srcButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    }\n}\n\nfunction initSessionAccountDropdownState() {\n    if ($srcAccountList.value === 'newaccount') {\n        $accoutnListBlock.style.display = 'none';\n    } else {\n        helper.continueButtonToggle(false);\n        $srcContent.setAttribute('data-paypal-is-hide-continue-button', false);\n        $srcButton.style.display = 'none';\n    }\n}\n\nmodule.exports = {\n    srcUpdateAmount,\n    setSessionAccountData,\n    updateSessionAccountDropdown,\n    initSessionAccountDropdownState\n};\n","'use strict';\nvar src = require('../braintreeSrc');\nvar srcHelper = require('./srcHelper');\n\nvar $srcButton = document.querySelector('.js_braintree_src_button');\nvar $srcNonce = document.querySelector('#braintreeSrcNonce');\nvar $srcCardDescription = document.querySelector('#braintreeSrcCardDescription');\nvar $srcBillingAddress = document.querySelector('#braintreeSrcBillingAddress');\nvar $srcAccountList = document.querySelector('#braintreeSrcAccountsList');\n\nfunction initSrcButton(continueButton) {\n    var srcIns;\n    var config = JSON.parse($srcButton.getAttribute('data-braintree-config'));\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($srcButton, 'not valid data-braintree-config');\n    }\n\n    config.onTokenizePayment = function (data) {\n        var cardDescrition = data.details.cardType + ' ' + data.description;\n\n        $srcNonce.value = data.nonce;\n        $srcCardDescription.value = cardDescrition;\n        $srcBillingAddress.value = data.billingAddressString;\n\n        srcHelper.setSessionAccountData(cardDescrition);\n\n        continueButton.click();\n        return;\n    };\n\n    srcIns = src.init(config, $srcButton);\n    srcIns.loadSrcButton();\n\n    srcHelper.initSessionAccountDropdownState();\n\n    $srcAccountList.addEventListener('change', srcHelper.updateSessionAccountDropdown);\n    $('body').on('checkout:updateCheckoutView', srcHelper.srcUpdateAmount.bind(null, srcIns, config));\n    $('body').on('braintree:updateCartTotals', srcHelper.srcUpdateAmount.bind(null, srcIns, config));\n    srcHelper.srcUpdateAmount(srcIns, config);\n}\n\nmodule.exports = {\n    initSrcButton\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar helper = require('../helper');\nvar loaderInstance = require('../loaderHelper');\nvar accountsLoader;\n\nfunction initAddVenmoAccount() {\n    var $btn = document.querySelector('.js_braintree_accountVenmoButton');\n    var $venmoErrorContainer = document.querySelector('#venmoAccountErrorContainer');\n    var $venmoLoader = document.querySelector('#braintreeVenmoAccLoader');\n    var isBrowserSupported = localStorage.getItem('venmoBrowserSupported');\n\n    if (JSON.parse($btn.getAttribute('data-is-inited'))) {\n        return;\n    }\n    var config = JSON.parse($btn.getAttribute('data-braintree-config'));\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($btn, 'not valid data-braintree-config');\n        return;\n    }\n    if (isBrowserSupported !== null & isBrowserSupported === 'false') {\n        venmoHelper.showVenmoAccountError();\n        $venmoErrorContainer.textContent = config.messages.VENMO_BROWSER_NOT_SUPPORTED;\n        return;\n    }\n\n    config.$loaderContainer = $venmoLoader;\n    config.$errorContainer = $venmoErrorContainer;\n    config.deviceNotSupportVenmo = function () {\n        venmoHelper.showVenmoAccountError();\n        $venmoErrorContainer.textContent = config.messages.VENMO_BROWSER_NOT_SUPPORTED;\n    };\n    config.onTokenizePayment = function (data) {\n        localStorage.removeItem('venmoBrowserSupported');\n        let accountVenmoButton = document.querySelector('.js_braintree_accountVenmoButton');\n        let venmoAddAccountHandler = accountVenmoButton.getAttribute('data-venmo-add-account-handler');\n        let venmoAccountFormFields = accountVenmoButton.getAttribute('data-venmo-account-form-fields');\n        let venmoAccountFormData = helper.createPaymentFormData(venmoAccountFormFields, {\n            nonce: data.nonce,\n            makedefault: document.querySelector('#makeDefaultVenmoAccount').checked\n        });\n        let csrfToken = document.querySelector('.js_braintree_accountVenmoButton_wrapper #csrf_token');\n        venmoAccountFormData.append(csrfToken.name, csrfToken.value);\n\n        let $loaderContainter = document.querySelector('#venmoAccountBtLoader');\n        accountsLoader = loaderInstance($loaderContainter);\n        accountsLoader.show();\n        return $.ajax({\n            type: 'POST',\n            url: venmoAddAccountHandler,\n            data: venmoAccountFormData,\n            contentType: false,\n            processData: false\n        })\n            .then((paymentData) => {\n                venmoHelper.hideVenmoAccountBtn();\n                $venmoLoader.style.display = 'none';\n                $venmoErrorContainer.textContent = '';\n                $venmoErrorContainer.style.display = 'none';\n\n                $.get(paymentData.renderAccountsUrl)\n                    .then((tplData => {\n                        accountsLoader.hide();\n                        document.querySelector('.venmo-accounts').innerHTML = tplData;\n                        document.querySelectorAll('.venmo-accounts .remove-bt-payment').forEach(function (el) {\n                            el.addEventListener('click', helper.removeBtPayment);\n                        });\n                    }));\n            })\n            .fail(({ responseJSON }) => {\n                accountsLoader.hide();\n                $venmoLoader.style.display = 'none';\n                $venmoErrorContainer.style.display = 'block';\n                $venmoErrorContainer.textContent = responseJSON.error;\n            });\n    };\n\n    braintreeVenmo.init(config, $btn);\n    $btn.setAttribute('isInited', true);\n}\n\nfunction initVenmoEvents() {\n    let $addVenmoAccountBtn = document.querySelector('.add-venmo-account');\n    $addVenmoAccountBtn.addEventListener('click', function () {\n        venmoHelper.showVenmoAccountBtn();\n        initAddVenmoAccount();\n    });\n\n    // Initiate click and if not supported -> init showVenmoError function (hide all except error msg)\n    $addVenmoAccountBtn.click();\n    if (document.querySelector('.js_braintree_accountVenmoButton_wrapper .error').style.display !== 'none') {\n        document.querySelector('.add-venmo-account').style.display = 'none';\n    }\n}\n\nmodule.exports = {\n    initVenmoEvents,\n    initAddVenmoAccount\n};\n","'use strict';\nvar braintreeUtils = require('../braintreeUtils');\nvar helper = require('../helper');\n\nvar $accountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $saveVenmoAccountCountainerEl = document.querySelector('#braintreeSaveVenmoAccountContainer');\nvar $saveVenmoAccountEl = document.querySelector('#braintreeSaveVenmoAccount');\nvar $venmoAccounMakeDefaultEl = document.querySelector('#braintreeVenmoAccountMakeDefault');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $braintreeVenmoAccount = document.getElementById('braintreeVenmoAccount');\nvar $venmoAccount = document.querySelector('.js_braintree_used_venmo_account');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\n\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nvar $addVenmoAccountBtn = document.querySelector('.add-venmo-account');\nvar $venmoAccountWrapper = document.querySelector('.js_braintree_accountVenmoButton_wrapper');\n\nfunction initAccountListAndSaveFunctionality() {\n    function accountsListChange() { // eslint-disable-line require-jsdoc\n        if ($accountsList.value === 'newaccount') {\n            if ($saveVenmoAccountCountainerEl) {\n                $saveVenmoAccountCountainerEl.style.display = '';\n                $saveVenmoAccountEl.checked = true;\n                $saveVenmoAccountEl.disabled = false;\n            }\n            if ($venmoAccounMakeDefaultEl) {\n                $venmoAccounMakeDefaultEl.disabled = false;\n            }\n        } else {\n            var selectedAccount = braintreeUtils.getSelectedData($accountsList);\n            if (selectedAccount && $venmoAccounMakeDefaultEl) {\n                if (selectedAccount['data-default'].value === 'true') {\n                    $venmoAccounMakeDefaultEl.disabled = true;\n                } else {\n                    $venmoAccounMakeDefaultEl.disabled = false;\n                }\n                $venmoAccounMakeDefaultEl.checked = true;\n            }\n            if ($saveVenmoAccountCountainerEl) {\n                $saveVenmoAccountEl.checked = false;\n                $saveVenmoAccountCountainerEl.style.display = 'none';\n            }\n        }\n    }\n\n    if ($saveVenmoAccountEl) {\n        $saveVenmoAccountEl.addEventListener('change', function () {\n            if ($saveVenmoAccountEl.checked) {\n                $venmoAccounMakeDefaultEl.disabled = false;\n                $venmoAccounMakeDefaultEl.checked = true;\n            } else {\n                $venmoAccounMakeDefaultEl.disabled = true;\n                $venmoAccounMakeDefaultEl.checked = false;\n            }\n        });\n    }\n\n    if ($accountsList) {\n        $accountsList.addEventListener('change', accountsListChange);\n        accountsListChange();\n    }\n}\n\nfunction showVenmoAccount() {\n    if (!$accountsList) {\n        $venmoAccount.classList.remove('used-venmo-account-hide');\n        $braintreeVenmoAccount.options[0].text = $braintreeVenmoUserId.value;\n    }\n\n    $venmoButton.style.display = 'none';\n    helper.continueButtonToggle(false);\n}\n\nfunction hideShowButtons() {\n    if ($accountsList.value === 'newaccount') {\n        $venmoButton.style.display = '';\n        helper.continueButtonToggle(true);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', true);\n    } else {\n        $venmoButton.style.display = 'none';\n        helper.continueButtonToggle(false);\n        $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n    }\n}\n\nfunction createLoaderContainter($target) {\n    var $loaderContainter = document.createElement('div');\n    $loaderContainter.className = 'venmo-braintree-loader';\n    helper.continueButtonToggle(true);\n\n    return $target.parentNode.insertBefore($loaderContainter, $target);\n}\n\nfunction hideVenmoButton() {\n    $venmoButton.parentElement.firstElementChild.style.display = 'none';\n    document.querySelector('.payment-options[role=tablist] .nav-item[data-method-id=\"Venmo\"]').style.display = 'none'; // Remove the venmo select payment method radiobutton\n}\n\n/**\n * updates the billing address form values within saved billing\n * @param {Object} billingAddress - the billing Address\n */\nfunction updateBillingAddressFormValues(billingAddress) {\n    var form = $('form[name=dwfrm_billing]');\n    var inputNames = ['firstName', 'lastName', 'address1', 'address2', 'city', 'postalCode', 'country'];\n    if (!form) return;\n\n    $.each(inputNames, function (index, value) {\n        $(`input[name$=_${value}]`, form).val(decodeURIComponent(billingAddress[value]));\n    });\n    $('select[name$=_stateCode],input[name$=_stateCode]', form)\n        .val(billingAddress.stateCode);\n}\n\nfunction showVenmoAccountBtn() {\n    $addVenmoAccountBtn.style.display = 'none';\n    $venmoAccountWrapper.style.display = 'block';\n}\nfunction hideVenmoAccountBtn() {\n    $addVenmoAccountBtn.style.display = 'block';\n    $venmoAccountWrapper.style.display = 'none';\n}\n\nfunction showVenmoAccountError() {\n    $addVenmoAccountBtn.style.display = 'none';\n    $venmoAccountWrapper.style.display = 'block';\n    [].slice.call($venmoAccountWrapper.children).forEach(function (item) {\n        if (!item.classList.contains('error')) {\n            item.style.display = 'none';\n        }\n    });\n}\n\nmodule.exports = {\n    showVenmoAccount,\n    initAccountListAndSaveFunctionality,\n    hideShowButtons,\n    createLoaderContainter,\n    hideVenmoButton,\n    updateBillingAddressFormValues,\n    showVenmoAccountBtn,\n    hideVenmoAccountBtn,\n    showVenmoAccountError\n};\n","'use strict';\nvar braintreeVenmo = require('../braintreeVenmo');\nvar venmoHelper = require('./venmoHelper');\nvar loaderInstance = require('../loaderHelper');\n\nvar $venmoButton = document.querySelector('.js_braintree_venmo_button');\nvar $btVermoAccountsList = document.querySelector('#braintreeVenmoAccountsList');\nvar $braintreeVenmoNonce = document.querySelector('#braintreeVenmoNonce');\nvar $braintreeVenmoUserId = document.querySelector('#braintreeVenmoUserId');\nvar $submitShippingBtn = document.querySelector('.button, .submit-shipping');\nvar $contactEmail = document.querySelector('.contact-info-block [name=dwfrm_billing_contactInfoFields_email]');\nvar $hideVenmoButton = document.querySelector('.braintree-venmo-pay-button');\nvar $billingForm = document.querySelector('.card-body [id=dwfrm_billing]');\nvar $venmoContent = document.querySelector('.js_braintree_venmoContent');\n\nfunction makeVenmoPayment(continueButton) {\n    var config = JSON.parse($venmoButton.getAttribute('data-braintree-config'));\n    var isBrowserSupported = localStorage.getItem('venmoBrowserSupported');\n\n    if (typeof config !== 'object' || config === null) {\n        // eslint-disable-next-line no-console\n        console.error($venmoButton, 'not valid data-braintree-config');\n    }\n    if (isBrowserSupported !== null & isBrowserSupported === 'false') {\n        venmoHelper.hideVenmoButton();\n        return false;\n    }\n    if (JSON.parse($hideVenmoButton.getAttribute('data-is-hide-venmo-button')) && $btVermoAccountsList !== 'newaccount') {\n        $venmoButton.style.display = 'none';\n    }\n\n    venmoHelper.initAccountListAndSaveFunctionality();\n\n    if ($btVermoAccountsList) {\n        $btVermoAccountsList.addEventListener('change', function () {\n            venmoHelper.hideShowButtons();\n        });\n        venmoHelper.hideShowButtons();\n    }\n\n    config.onClick = function () {\n        if ($billingForm.checkValidity()) {\n            /**\n                * Setting current customer Billing address to form\n                *  For the case when SFCC redirects customer from payment stage to shipping stage\n                *  after successful Venmo app response\n            */\n            document.querySelector('#braintreeVenmoBilling').value = JSON.stringify(require('../helper').getBillingAddressFormValues());\n\n            return true;\n        }\n        $contactEmail.classList.add('is-invalid');\n        return false;\n    };\n    config.deviceNotSupportVenmo = function () {\n        venmoHelper.hideVenmoButton();\n    };\n    config.onTokenizePayment = function (data) {\n        var $loaderContainer = venmoHelper.createLoaderContainter(document.querySelector('.page'));\n        loaderInstance($loaderContainer).show();\n        localStorage.removeItem('venmoBrowserSupported');\n\n        $braintreeVenmoNonce.value = data.nonce;\n        $braintreeVenmoUserId.value = data.details.username;\n\n        if (window.history.state !== 'shipping') {\n            continueButton.click();\n            document.querySelector('.venmo-braintree-loader').remove();\n            return true;\n        }\n\n        venmoHelper.updateBillingAddressFormValues(JSON.parse(document.querySelector('#braintreeVenmoBilling').value));\n\n        // move to stage payment\n        $submitShippingBtn.click();\n        $venmoButton.setAttribute('data-is-valid-stage', true);\n        $venmoButton.setAttribute('data-user-email', $contactEmail.value);\n        document.querySelector('.venmo-braintree-loader').remove();\n    };\n\n    /**\n        *  Init Venmo app with correct URL fragment (hash) to prevent Browser from opening the URL in a new tab.\n        *  Braintree JS SDK is preserving the URL in its entirety and modifies the URL fragment (hash)\n        *  to send back the results from Venmo (e.g. nonce, error message, etc.)\n        *\n    */\n    var hashChange = new MutationObserver(function (mutations) {\n        var correlationId = document.querySelector('#braintreeVenmoDeviceData').value || null;\n        var mutation = mutations.find(function (element) {\n            return element.attributeName === 'data-checkout-stage' && element.target.dataset.checkoutStage === 'payment';\n        });\n\n        if (!mutation) {\n            return false;\n        }\n        if (!correlationId) {\n            braintreeVenmo.init(config, $venmoButton);\n            return true;\n        }\n\n        if ($braintreeVenmoNonce.value && JSON.parse($venmoButton.getAttribute('data-is-valid-stage'))) {\n            $contactEmail.value = $venmoButton.getAttribute('data-user-email') || '';\n            $venmoButton.setAttribute('data-is-valid-stage', false);\n            continueButton.click();\n\n            return true;\n        }\n        if ($venmoContent.classList.contains('active') && mutation.oldValue === 'placeOrder') {\n            venmoHelper.showVenmoAccount();\n            $venmoContent.setAttribute('data-paypal-is-hide-continue-button', false);\n            $hideVenmoButton.setAttribute('data-is-hide-venmo-button', true);\n        }\n    });\n\n    hashChange.observe(document.querySelector('#checkout-main'), { attributeOldValue: true });\n}\n\nmodule.exports = {\n    makeVenmoPayment\n};\n","require('./braintree/braintreeMFRA')();\n"],"sourceRoot":""}